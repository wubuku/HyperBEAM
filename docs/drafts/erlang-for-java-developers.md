# Erlang æ•™ç¨‹ - ä¸“ä¸º Java å¼€å‘è€…æ‰“é€ 

> å¬è¯´è¿‡ Erlang å°±åƒ Java çš„"åˆ†å¸ƒå¼ç‰ˆ"ï¼Ÿæ¥å§ï¼Œè®©æˆ‘ä»¬ç”¨ Java çš„æ€ç»´æ¥å­¦ä¹  Erlangï¼

## ğŸ¯ å‰è¨€ï¼šErlang å¯¹ Java å¼€å‘è€…æ¥è¯´æ˜¯ä»€ä¹ˆï¼Ÿ

æƒ³è±¡ä¸€ä¸‹ï¼š**Java æ˜¯é¢å‘å¯¹è±¡çš„å·¨äººï¼ŒErlang æ˜¯å¹¶å‘çš„å°ç²¾çµ**ã€‚

| Java                           | Erlang                          | è¯´æ˜          |
| ------------------------------ | ------------------------------- | ------------- |
| `public class User {}`         | `-module(user).`                | ç±» â†’ æ¨¡å—     |
| `public void sendMessage() {}` | `send_message() -> ...`         | æ–¹æ³• â†’ å‡½æ•°   |
| `throw new Exception()`        | `{error, reason}`               | å¼‚å¸¸ â†’ è¿”å›å€¼ |
| `Thread thread = new Thread()` | `Pid = spawn(fun my_module:my_task/0)` | çº¿ç¨‹ â†’ è¿›ç¨‹   |
| `List<User> users`             | `[User1, User2, User3]`         | é›†åˆ â†’ åˆ—è¡¨   |

**Erlang çš„ä¼˜åŠ¿ï¼š**
- ğŸš€ **è½»æ¾æ”¯æŒç™¾ä¸‡çº§å¹¶å‘è¿æ¥**ï¼ˆè¿œè¶… Java çš„é«˜å¹¶å‘èƒ½åŠ›ï¼‰
- ğŸ›¡ï¸ **å¯å®ç°é«˜è¾¾ 99.9999999% çš„ç³»ç»Ÿå¯ç”¨æ€§**ï¼ˆæºäºå…¶åœ¨ç”µä¿¡é¢†åŸŸçš„ä¼ å¥‡è¡¨ç°ï¼‰
- ğŸŒ **å¤©ç”Ÿæ”¯æŒåˆ†å¸ƒå¼**

**è¿™ä¸ªæ•™ç¨‹çš„ç›®æ ‡ï¼š** è®©ä½ èƒ½çœ‹æ‡‚ [HyperBEAM Erlang æ•™ç¨‹](https://hbdocs.vercel.app/hyperbeam/erlang) ä¸­çš„æ‰€æœ‰ä»£ç ï¼

## ğŸ“š å®Œæ•´å­¦ä¹ è·¯å¾„ï¼ˆæ¶µç›– HyperBEAM æ•™ç¨‹çš„æ‰€æœ‰åŸºç¡€çŸ¥è¯†ï¼‰

- Day 0: Erlang è¯­æ³•åŸºç¡€ - åˆ«æ€¥ï¼Œå…ˆå­¦è¯­æ³•ï¼
- Day 1: åŸºç¡€æ•°æ®ç±»å‹ - æ•°å­—ã€åŸå­ã€å­—ç¬¦ä¸²ã€å˜é‡
- Day 2: æ•°æ®ç»“æ„ - åˆ—è¡¨ã€å…ƒç»„ã€æ˜ å°„ã€è®°å½•
- Day 3: å‡½æ•°åŸºç¡€ - å‡½æ•°ã€å®ˆå«ã€æ¨¡å¼åŒ¹é…
- Day 4: æ§åˆ¶æµ - åˆ†æ”¯ã€é€’å½’ã€é«˜é˜¶å‡½æ•°
- Day 5: å¹¶å‘ç¼–ç¨‹ - è¿›ç¨‹ã€æ¶ˆæ¯ä¼ é€’ã€OTP
- Day 6: æ ‡å‡†åº“ - é”™è¯¯å¤„ç†ã€æ–‡ä»¶ã€äºŒè¿›åˆ¶ã€åŠ å¯†ç­‰
- Day 7: é«˜çº§ç‰¹æ€§ - ETSã€å®šæ—¶å™¨ã€ç«¯å£ã€å¼•ç”¨ç­‰
- Day 8: æ¨¡å—ç³»ç»Ÿä¸ NIFs

---

## Day 0: Erlang è¯­æ³•åŸºç¡€ - ä» Java æ€ç»´è½¬å˜çš„å¼€å§‹

> **é‡è¦æé†’**ï¼šå¯¹äº Java å¼€å‘è€…ï¼Œå­¦ä¹  Erlang çš„ç¬¬ä¸€ä¸ªæŒ‘æˆ˜ä¸æ˜¯æ•°æ®ç±»å‹ï¼Œè€Œæ˜¯è¦å½»åº•æ”¹å˜å¯¹â€œè¯­å¥â€å’Œâ€œè¡¨è¾¾å¼â€çš„çœ‹æ³•ã€‚è¯·å¿˜æ‰ Java çš„åˆ†å·å’ŒèŠ±æ‹¬å·ï¼Œè®©æˆ‘ä»¬å»ºç«‹æ–°çš„å¿ƒæ™ºæ¨¡å‹ã€‚

### 0.1 æ ¸å¿ƒåŒºåˆ«ï¼šè¡¨è¾¾å¼ vs è¯­å¥

è¿™æ˜¯ä» Java åˆ° Erlang æœ€æ ¹æœ¬çš„æ€ç»´è½¬å˜ã€‚

- **Java çš„ä¸–ç•Œæ˜¯â€œè¯­å¥â€é©±åŠ¨çš„**ï¼šä½ æ‰§è¡Œä¸€æ¡æ¡æŒ‡ä»¤ï¼ˆ`x = 5;`, `System.out.println("Hello");`ï¼‰ï¼ŒæŸäº›è¯­å¥ï¼ˆå¦‚ `return ...;`ï¼‰å¯ä»¥è¿”å›å€¼ã€‚
- **Erlang çš„ä¸–ç•Œæ˜¯â€œè¡¨è¾¾å¼â€é©±åŠ¨çš„**ï¼š**ä¸€åˆ‡éƒ½æ˜¯è¡¨è¾¾å¼ï¼Œä¸€åˆ‡éƒ½æœ‰è¿”å›å€¼**ã€‚`X = 5` è¿™ä¸ªç»‘å®šæ“ä½œæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå®ƒçš„å€¼æ˜¯ `5`ã€‚å‡½æ•°ä½“ç”±ä¸€ç³»åˆ—è¡¨è¾¾å¼ç»„æˆï¼Œæœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼å°±æ˜¯æ•´ä¸ªå‡½æ•°çš„è¿”å›å€¼ã€‚

å› ä¸ºè¿™ä¸ªæ ¸å¿ƒåŒºåˆ«ï¼ŒErlang ä¸éœ€è¦ `return` å…³é”®å­—ã€‚

```erlang
% Java é£æ ¼ï¼ˆè¯­å¥ï¼‰
public int add(int a, int b) {
    int temp = a + 10;  // è¿™æ˜¯ä¸€ä¸ªè¯­å¥
    return temp + b;    // å¿…é¡»ç”¨ return æ˜¾å¼è¿”å›å€¼
}

% Erlang é£æ ¼ï¼ˆè¡¨è¾¾å¼ï¼‰
add(A, B) ->
    Temp = A + 10,      % è¿™æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå…¶å€¼ä¸º A + 10
    Temp + B.           % è¿™æ˜¯æœ€åä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå…¶å€¼è‡ªåŠ¨æˆä¸ºå‡½æ•°çš„è¿”å›å€¼
```

### 0.2 åˆ†éš”ç¬¦ï¼šé€—å· (,) vs å¥ç‚¹ (.) - Java å¼€å‘è€…çš„å…³é”®ç±»æ¯”

å¿˜æ‰åˆ†å·å’ŒèŠ±æ‹¬å·ï¼Œè®°ä½è¿™ä¸ªå…³é”®ç±»æ¯”ï¼š

- **é€—å· `,`**  â†’  ç±»ä¼¼äº Java æ–¹æ³•ä½“**å†…éƒ¨çš„åˆ†å· `;`**ã€‚
  - **ä½œç”¨**ï¼šåˆ†éš”**åŒä¸€ä¸ªå‡½æ•°å®šä¹‰ä¸­**çš„ä¸€ç³»åˆ—è¿ç»­è¡¨è¾¾å¼ã€‚å®ƒå‘Šè¯‰ç¼–è¯‘å™¨ï¼šâ€œè¿™ä¸ªè¡¨è¾¾å¼ç»“æŸäº†ï¼Œä¸‹ä¸€ä¸ªè¡¨è¾¾å¼é©¬ä¸Šå¼€å§‹ï¼Œä½†æˆ‘ä»¬è¿˜åœ¨åŒä¸€ä¸ªå‡½æ•°é‡Œã€‚â€

- **å¥ç‚¹ `.`** â†’ ç±»ä¼¼äº Java æ–¹æ³•çš„**æœ€åä¸€ä¸ªå³èŠ±æ‹¬å· `}`**ã€‚
  - **ä½œç”¨**ï¼š**ç»ˆç»“ä¸€ä¸ªå®Œæ•´çš„é€»è¾‘å•å…ƒ**ï¼Œæœ€å¸¸è§çš„å°±æ˜¯ä¸€ä¸ªå‡½æ•°å®šä¹‰ï¼ˆæˆ–ä¸€ä¸ªå‡½æ•°å­å¥ï¼‰ã€‚å®ƒå‘Šè¯‰ç¼–è¯‘å™¨ï¼šâ€œè¿™ä¸ªå‡½æ•°åˆ°æ­¤å½»åº•ç»“æŸäº†ï¼Œåé¢ä¸ä¼šå†æœ‰å±äºå®ƒçš„ä»£ç äº†ã€‚â€

è®©æˆ‘ä»¬ç”¨ä»£ç æ¥å›ºåŒ–è¿™ä¸ªç†è§£ï¼š

```java
// Java: å®Œæ•´çš„ "é€»è¾‘å•å…ƒ" æ˜¯æ•´ä¸ªæ–¹æ³•
public int example(int x) {
    int y = x + 1; // å†…éƒ¨ç”¨åˆ†å·
    int z = y * 2; // å†…éƒ¨ç”¨åˆ†å·
    return z;
} // ç”¨ } ç»ˆç»“æ•´ä¸ªé€»è¾‘å•å…ƒ
```

```erlang
% Erlang: å®Œæ•´çš„ "é€»è¾‘å•å…ƒ" æ˜¯æ•´ä¸ªå‡½æ•°å®šä¹‰
example(X) ->
    Y = X + 1,  % å†…éƒ¨ç”¨é€—å·
    Z = Y * 2,  % å†…éƒ¨ç”¨é€—å·
    Z.          % ç”¨ . ç»ˆç»“æ•´ä¸ªé€»è¾‘å•å…ƒ
```

**è¿™ä¸ªç±»æ¯”èƒ½å¸®ä½ ç†è§£ä¸ºä»€ä¹ˆä¸‹é¢çš„ä»£ç æ˜¯é”™è¯¯çš„ï¼š**

```erlang
% âŒ ç»å¯¹é”™è¯¯çš„å†™æ³•
bad_function(X) ->
    A = X + 1.  % é”™è¯¯ï¼å¥ç‚¹åœ¨è¿™é‡Œç›¸å½“äº Java çš„ "}"
    B = A * 2.  % ç¼–è¯‘å¤±è´¥ï¼ç¼–è¯‘å™¨è®¤ä¸ºå‡½æ•°åœ¨ä¸Šä¸€è¡Œå·²ç»ç»“æŸäº†
                % è¿™è¡Œä»£ç å°±åƒæ˜¯å†™åœ¨ Java æ–¹æ³•çš„ "}" ä¹‹åï¼Œå±äºæ— ä¸»ä»£ç 
```
**ç¼–è¯‘é”™è¯¯ä¼šæ˜¯**: `syntax error before: 'B'`ï¼Œå› ä¸ºç¼–è¯‘å™¨è®¤ä¸º `bad_function` åœ¨ `A = X + 1.` ä¹‹åå·²ç»ç»“æŸï¼Œ`B` çš„å‡ºç°ä¸åˆæ³•ã€‚

### 0.3 ä»£ç å—ä¹Ÿæ˜¯è¡¨è¾¾å¼

åœ¨ Java ä¸­ï¼Œ`if`ã€`switch`ã€`try-catch` éƒ½æ˜¯è¯­å¥å—ã€‚ä½†åœ¨ Erlang ä¸­ï¼Œ`if`ã€`case`ã€`receive` å—æœ¬èº«å°±æ˜¯**è¡¨è¾¾å¼**ï¼Œå®ƒä»¬ä¸€å®šä¼šè¿”å›ä¸€ä¸ªå€¼ã€‚

è¿™å°±åƒ Java ä¸­çš„ä¸‰å…ƒè¿ç®—ç¬¦ `(condition ? value1 : value2)`ï¼Œå®ƒæœ¬èº«æ˜¯æœ‰å€¼çš„ã€‚

```erlang
% âœ… case å—æœ¬èº«æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå…¶ç»“æœè¢«ç»‘å®šåˆ°å˜é‡ Result
Result = case X of
    1 -> "one";
    2 -> "two";
    _ -> "other"
end, % case è¡¨è¾¾å¼ç»“æŸï¼Œç”¨é€—å·è¿æ¥åç»­è¡¨è¾¾å¼
io:format("Result: ~p~n", [Result]).

% âœ… if å—ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼
Value = if
    X > 10 -> "big";
    X < 0 -> "negative";
    true -> "normal"  % å¿…é¡»æœ‰ true åˆ†æ”¯ï¼Œä¿è¯è¡¨è¾¾å¼æ€»æœ‰è¿”å›å€¼
end,
io:format("Value: ~p~n", [Value]).

% âœ… å½“å—è¡¨è¾¾å¼æ˜¯å‡½æ•°çš„æœ€åä¸€æ­¥æ—¶ï¼Œå…¶åè·Ÿå¥ç‚¹
func_returning_case(X) ->
    case X of
        1 -> "one";
        _ -> "other"
    end. % case è¡¨è¾¾å¼çš„ç»“æœå°±æ˜¯å‡½æ•°çš„è¿”å›å€¼ï¼Œç”¨å¥ç‚¹ç»“æŸæ•´ä¸ªå‡½æ•°
```

**`if` ä¸ºä»€ä¹ˆå¿…é¡»æœ‰ `true` å­å¥ï¼Ÿ**
å› ä¸ºå®ƒæ˜¯ä¸€ä¸ªå¿…é¡»è¿”å›å€¼çš„è¡¨è¾¾å¼ã€‚å¦‚æœæ²¡æœ‰ `true` è¿™æ ·çš„â€œå…¨åŒ¹é…â€å­å¥ï¼Œå½“æ‰€æœ‰æ¡ä»¶éƒ½ä¸æ»¡è¶³æ—¶ï¼Œè¡¨è¾¾å¼å°±æ²¡æ³•è¿”å›å€¼ï¼Œè¿™åœ¨é€»è¾‘ä¸Šæ˜¯çŸ›ç›¾çš„ï¼Œæ‰€ä»¥ Erlang ä¼šç›´æ¥è®©ç¨‹åºå´©æºƒå¹¶æŠ›å‡º `if_clause` å¼‚å¸¸ã€‚è¿™æ˜¯ä¸€ç§å¼ºåˆ¶æ€§çš„å®‰å…¨æªæ–½ã€‚

### 0.4 æ³¨é‡Š

```erlang
% å•è¡Œæ³¨é‡Šï¼šä»¥ç™¾åˆ†å·å¼€å¤´ï¼Œç›´åˆ°è¡Œå°¾ã€‚

%% å¤šè¡Œæ³¨é‡Šçš„æƒ¯ä¾‹ï¼š
%% è™½ç„¶æ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å•è¡Œæ³¨é‡Šï¼Œ
%% ä½†ä½¿ç”¨ä¸¤ä¸ªç™¾åˆ†å·æ˜¯ç¤¾åŒºæ¨èçš„ã€ç”¨äºæ–‡æ¡£å—çš„é£æ ¼ã€‚
```
Erlang æ²¡æœ‰ `/* ... */` è¿™æ ·çš„å—æ³¨é‡Šè¯­æ³•ã€‚

### 0.5 æ¨¡å—ä¸å¯è§æ€§ (Module & Visibility) - ç±»æ¯” Java çš„ public/private

ä¸€ä¸ª Erlang æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼ˆModuleï¼‰ã€‚æ¨¡å—æ˜¯ä»£ç ç»„ç»‡çš„åŸºæœ¬å•å…ƒã€‚

```erlang
% æ–‡ä»¶å: user_service.erl

-module(user_service). % ç±»ä¼¼äº Java çš„ `public class user_service`

% å¯¼å‡ºå‡½æ•°ï¼Œç±»ä¼¼äº Java çš„ `public` æ–¹æ³•
-export([create_user/2, find_user/1]).

% Arity (å…ƒæ•°) çš„æ¦‚å¿µï¼š
% `create_user/2` æŒ‡çš„æ˜¯åä¸º `create_user` ä¸”æœ‰ 2 ä¸ªå‚æ•°çš„å‡½æ•°ã€‚
% `find_user/1`   æŒ‡çš„æ˜¯åä¸º `find_user`   ä¸”æœ‰ 1 ä¸ªå‚æ•°çš„å‡½æ•°ã€‚
% Erlang é€šè¿‡ "å‡½æ•°å/å…ƒæ•°" æ¥å”¯ä¸€ç¡®å®šä¸€ä¸ªå‡½æ•°ï¼Œè¿™æ˜¯å…¶å‡½æ•°é‡è½½çš„æ–¹å¼ï¼Œ
% ä¸åŒäº Java é€šè¿‡å‚æ•°ç±»å‹æ¥é‡è½½ã€‚

%% ===================================================================
%% Public API Functions
%% ===================================================================

% @doc åˆ›å»ºä¸€ä¸ªç”¨æˆ·
% è¿™æ˜¯å¯¼å‡ºçš„ "public" å‡½æ•°
create_user(Name, Age) ->
    Id = generate_id(), % è°ƒç”¨ä¸€ä¸ªå†…éƒ¨çš„ "private" å‡½æ•°
    {ok, #{id => Id, name => Name, age => Age}}.

% @doc æŸ¥æ‰¾ç”¨æˆ·
% è¿™æ˜¯å¦ä¸€ä¸ª "public" å‡½æ•°
find_user(Id) ->
    % ... æŸ¥æ‰¾é€»è¾‘ ...
    {ok, #{id => Id, name => <<"Dummy">>, age => 99}}.

%% ===================================================================
%% Private Helper Functions
%% ===================================================================

% è¿™ä¸ªå‡½æ•°æ²¡æœ‰åœ¨ -exportåˆ—è¡¨ä¸­ï¼Œæ‰€ä»¥æ˜¯ "private" çš„
% åªèƒ½åœ¨ user_service æ¨¡å—å†…éƒ¨è¢«è°ƒç”¨
generate_id() ->
    % ... å¤æ‚çš„IDç”Ÿæˆé€»è¾‘ ...
    12345.
```

**ä¸ Java çš„ç±»æ¯”æ€»ç»“ï¼š**

| Erlang æ¦‚å¿µ | Java ç±»æ¯” | è§£é‡Š |
| :--- | :--- | :--- |
| `-module(my_module).` | `public class my_module { ... }` | å®šä¹‰äº†ä¸€ä¸ªä»£ç å•å…ƒã€‚ |
| `-export([func/1]).` | `public Result func(Arg1) { ... }` | å£°æ˜äº†æ¨¡å—çš„å…¬å…±æ¥å£ï¼Œå…è®¸å¤–éƒ¨è°ƒç”¨ã€‚ |
| æœªå¯¼å‡ºçš„å‡½æ•° | `private Result helper() { ... }` | é»˜è®¤æ˜¯ç§æœ‰çš„ï¼Œåªèƒ½åœ¨æ¨¡å—å†…éƒ¨ä½¿ç”¨ã€‚ |
| `func/1`, `func/2` | æ–¹æ³•é‡è½½ (Method Overloading) | Erlang æ ¹æ®å‚æ•°**æ•°é‡**ï¼ˆå…ƒæ•°ï¼‰åŒºåˆ†å‡½æ•°ï¼ŒJava æ ¹æ®å‚æ•°**ç±»å‹å’Œæ•°é‡**ã€‚|

ç°åœ¨ï¼Œä½ å·²ç»æŒæ¡äº† Erlang çš„éª¨æ¶ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¼€å§‹å¡«å……è¡€è‚‰â€”â€”æ•°æ®ç±»å‹ã€‚

## Day 1: åŸºç¡€æ•°æ®ç±»å‹ (Primitives) - æ–°çš„æ€ç»´æ¨¡å¼

Erlang çš„åŸºç¡€ç±»å‹çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†å…¶èƒŒåçš„å“²å­¦ä¸ Java å¤§ç›¸å¾„åº­ã€‚ç†è§£è¿™äº›å·®å¼‚æ˜¯å­¦ä¹  Erlang çš„å…³é”®ã€‚

### 1.1 æ•°å­— (Numbers) - å†è§ï¼Œ`BigInteger`ï¼

Java ä¸­æœ‰ `int`, `long`, `float`, `double`ï¼Œå½“ `long` ä¸å¤Ÿç”¨æ—¶ï¼Œä½ å¿…é¡»æ˜¾å¼åœ°æ¢ç”¨ `BigInteger` ç±»ï¼Œè¿™å¾ˆç¹çã€‚

Erlang åˆ™ä¼˜é›…å¾—å¤šï¼š

```erlang
% Erlang çš„æ•°å­—ï¼šç®€å•ã€å¼ºå¤§
Age = 25,                    % æ•´æ•° (Integer)
Population = 7800000000,     % å¤§æ•´æ•° (Bignum)ï¼Œè‡ªåŠ¨å¤„ç†ï¼Œæ— éœ€å…³å¿ƒ
Pi = 3.14159,                % æµ®ç‚¹æ•° (Float)ï¼Œé€šå¸¸æ˜¯64ä½åŒç²¾åº¦

1_000_000.    % å¯ä»¥ç”¨ä¸‹åˆ’çº¿å¢åŠ å¯è¯»æ€§
```

**æ ¸å¿ƒä¼˜åŠ¿**ï¼šä½ **æ°¸è¿œä¸éœ€è¦æ‹…å¿ƒæ•´æ•°æº¢å‡º**ã€‚Erlang ä¼šåœ¨è¿è¡Œæ—¶æ ¹æ®æ•°å­—çš„å¤§å°åœ¨å°æ•´æ•°ï¼ˆmachine wordï¼‰å’Œå¤§æ•´æ•°ï¼ˆ`BigInteger`çš„ç­‰ä»·ç‰©ï¼‰ä¹‹é—´è‡ªåŠ¨åˆ‡æ¢ï¼Œå¯¹å¼€å‘è€…å®Œå…¨é€æ˜ã€‚

#### **ä¸€ä¸ªé‡è¦çš„â€œé™·é˜±â€ï¼š`==` vs `=:=`**

è¿™å¯¹äº Java å¼€å‘è€…æ˜¯ä¸€ä¸ªå¸¸è§çš„å‘ã€‚

- **`==`ï¼šå€¼ç›¸ç­‰æ¯”è¾ƒ (Value Equality)**
  - **ç±»æ¯” Java çš„ `.equals()`**
  - å®ƒä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ï¼Œåªè¦**æ•°å€¼**ç›¸ç­‰ï¼Œå°±è¿”å› `true`ã€‚
  - `5 == 5.0` â†’ `true`ã€‚å› ä¸ºä»å€¼çš„è§’åº¦çœ‹ï¼Œ`5` å’Œ `5.0` æ˜¯ç›¸ç­‰çš„ã€‚

- **`=:=`ï¼šç²¾ç¡®ç›¸ç­‰æ¯”è¾ƒ (Exact Equality)**
  - **ç±»æ¯” Java å¯¹åŸºæœ¬ç±»å‹çš„ `==`ï¼Œæˆ–è€…æ›´åƒæ˜¯ç±»å‹å’Œå€¼éƒ½ä¸¥æ ¼çš„æ¯”è¾ƒ**
  - å®ƒ**ä»ä¸**è¿›è¡Œç±»å‹è½¬æ¢ã€‚åªæœ‰å½“ç±»å‹å’Œå€¼éƒ½å®Œå…¨ç›¸åŒæ—¶ï¼Œæ‰è¿”å› `true`ã€‚
  - `5 =:= 5.0` â†’ `false`ã€‚å› ä¸ºä¸€ä¸ªæ˜¯æ•´æ•°ç±»å‹ï¼Œä¸€ä¸ªæ˜¯æµ®ç‚¹æ•°ç±»å‹ã€‚

**ç»éªŒæ³•åˆ™**ï¼šåœ¨ä½ ä¸ç¡®å®šæˆ–ä¸å¸Œæœ›è¿›è¡Œè‡ªåŠ¨ç±»å‹è½¬æ¢æ—¶ï¼Œ**æ€»æ˜¯ä¼˜å…ˆä½¿ç”¨ `=:=`**ã€‚è¿™èƒ½è®©ä½ çš„ä»£ç æ›´ä¸¥è°¨ï¼Œé¿å…éšè”½çš„ bugã€‚å¯¹åº”çš„â€œä¸ç²¾ç¡®ç­‰äºâ€æ˜¯ `=/=`ã€‚

### 1.2 åŸå­ (Atoms) - è¶…çº§`enum`å’Œé«˜æ€§èƒ½`String`

åŸå­æ˜¯ Erlang çš„ä¸€ä¸ªç‰¹è‰²ã€‚å¯¹äº Java å¼€å‘è€…ï¼Œå¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ¥ç†è§£å®ƒï¼š

-   **å®ƒæ˜¯ `enum`**ï¼šç”¨äºè¡¨ç¤ºä¸€ç»„å›ºå®šçš„ã€å‘½åçš„çŠ¶æ€ã€‚ä¾‹å¦‚ `ok`, `error`, `pending`ã€‚
-   **å®ƒæ˜¯ `public static final String`**ï¼šç”¨äºæ¶ˆæ¯çš„æ ‡ç­¾æˆ– `Map` çš„é”®ã€‚
-   **å®ƒæ˜¯ `Boolean`**: `true` å’Œ `false` åœ¨ Erlang ä¸­**å°±æ˜¯åŸå­**ï¼

```erlang
% åŸå­å°±æ˜¯å®ƒæœ¬èº«ï¼Œä»¥å°å†™å­—æ¯å¼€å¤´
Status = ok,
Result = {ok, <<"Data">>},
IsAdmin = true. % true å°±æ˜¯ä¸€ä¸ªåŸå­ï¼

% åœ¨ case è¯­å¥ä¸­ï¼ŒåŸå­æ˜¯å®Œç¾çš„åŒ¹é…å¯¹è±¡
case Status of
    ok -> "æˆåŠŸ";
    error -> "å¤±è´¥";
    _ -> "æœªçŸ¥"
end.
```

**æ€§èƒ½çš„ç§˜å¯†ï¼šæŒ‡é’ˆæ¯”è¾ƒ**
ä¸ºä»€ä¹ˆä¸ç”¨å­—ç¬¦ä¸² `"ok"` è€Œç”¨åŸå­ `ok`ï¼Ÿ

-   å½“ä½ åœ¨ä»£ç é‡Œå†™ä¸‹ä¸€ä¸ªåŸå­ `ok`ï¼ŒErlang ç¼–è¯‘å™¨ä¼šæŠŠå®ƒæ·»åŠ åˆ°ä¸€ä¸ªå…¨å±€çš„â€œåŸå­è¡¨â€ä¸­ï¼Œå¹¶ç»™å®ƒä¸€ä¸ªå”¯ä¸€çš„æ•´æ•°ç´¢å¼•ã€‚
-   åœ¨è¿è¡Œæ—¶ï¼Œä»£ç ä¸­æ‰€æœ‰å‡ºç°çš„ `ok` å®é™…ä¸Šéƒ½æ˜¯é‚£ä¸ªå°å°çš„æ•´æ•°ç´¢å¼•ã€‚
-   æ‰€ä»¥ï¼Œæ¯”è¾ƒ `Status == ok` å°±å˜æˆäº†**æ¯”è¾ƒä¸¤ä¸ªæ•´æ•°**ï¼Œè¿™æ¯” Java ä¸­ `status.equals("ok")` é€å­—ç¬¦æ¯”è¾ƒè¦å¿«å‡ ä¸ªæ•°é‡çº§ã€‚

**âš ï¸ ç»ˆæè­¦å‘Šï¼šåŠ¨æ€åˆ›å»ºåŸå­çš„å±é™©**
åŸå­ä¸€æ—¦è¢«åˆ›å»ºï¼Œ**æ°¸è¿œä¸ä¼šè¢«åƒåœ¾å›æ”¶**ã€‚

-   **ç±»æ¯”**ï¼šæƒ³è±¡ä¸€ä¸‹ Java ä¸­æœ‰ä¸€ä¸ª**å…¨å±€çš„ã€æ°¸ä¸æ¸…ç†çš„ `HashSet<String>`**ã€‚ä½ æ¯è°ƒç”¨ä¸€æ¬¡ `string.to_atom()`ï¼Œå°±ç­‰äºå‘è¿™ä¸ª `HashSet` ä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚
-   **åæœ**ï¼šå¦‚æœä½ çš„ä»£ç å…è®¸ä»å¤–éƒ¨è¾“å…¥ï¼ˆå¦‚ç”¨æˆ· HTTP è¯·æ±‚çš„å‚æ•°ï¼‰åŠ¨æ€åˆ›å»ºåŸå­ï¼Œæ”»å‡»è€…å°±å¯ä»¥é€šè¿‡å‘é€å¤§é‡ä¸åŒçš„å­—ç¬¦ä¸²æ¥è€—å°½ä½ è™šæ‹Ÿæœºçš„å†…å­˜ï¼ˆå› ä¸ºåŸå­è¡¨æ˜¯æœ‰ä¸Šé™çš„ï¼Œé»˜è®¤ä¸º `1_048_576`ï¼‰ï¼Œå¯¼è‡´æ•´ä¸ªç³»ç»Ÿå´©æºƒã€‚
-   **é“å¾‹**ï¼š**æ°¸è¿œä¸è¦å°†ä¸å—ä¿¡ä»»çš„ã€åŠ¨æ€çš„å¤–éƒ¨è¾“å…¥è½¬æ¢ä¸ºåŸå­ã€‚**

### 1.3 å­—ç¬¦ä¸²ï¼šä¸€ä¸ªå†å²é—ç•™çš„é™·é˜±

è¿™æ˜¯ Erlang æ–°æ‰‹ï¼ˆå°¤å…¶æ˜¯æ¥è‡ªå…¶ä»–è¯­è¨€çš„å¼€å‘è€…ï¼‰æœ€å®¹æ˜“æ‰è¿›å»çš„å‘ã€‚

**è¯·ç‰¢è®°è¿™ä¸ªäº‹å®ï¼š**

-   `<<"æˆ‘æ˜¯å­—ç¬¦ä¸²">>` (Binary - äºŒè¿›åˆ¶) â†’ è¿™**æ‰æ˜¯** Erlang ä¸­ç°ä»£ã€é«˜æ•ˆã€æ­£ç¡®çš„å­—ç¬¦ä¸²ã€‚å®ƒç±»ä¼¼äº Java çš„ `String` ç±»ã€‚
-   `"æˆ‘ä¹Ÿæ˜¯å­—ç¬¦ä¸²"` (List - åˆ—è¡¨) â†’ è¿™**ä¸æ˜¯**çœŸæ­£çš„å­—ç¬¦ä¸²ï¼å®ƒæ˜¯ä¸€ä¸ªç”±å­—ç¬¦ç¼–ç ï¼ˆæ•´æ•°ï¼‰ç»„æˆçš„**é“¾è¡¨**ã€‚å®ƒåªæ˜¯è¯­æ³•ç³–ï¼Œå®é™…ä¸Šç­‰åŒäº `[25105, 20063, 26159, 23383, 31526]`ã€‚

| Erlang ç±»å‹ | è¯­æ³• | å®é™…å†…å®¹ | Java ç±»æ¯” | æ€§èƒ½/å†…å­˜ | æ¨èç”¨æ³• |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **äºŒè¿›åˆ¶** | `<<"text">>` | è¿ç»­çš„å­—èŠ‚å— | `String` / `byte[]` | **é«˜æ•ˆ** | **æ‰€æœ‰æ–‡æœ¬å¤„ç†çš„é¦–é€‰** |
| **å­—ç¬¦åˆ—è¡¨**| `"text"` | `[116, 101, 120, 116]` | `LinkedList<Integer>` | **æåº¦ä½æ•ˆ** | **ä»…ç”¨äºå…¼å®¹æ—§çš„åº“å‡½æ•°** |

**ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ**
è¿™æ˜¯ Erlang çš„å†å²é—ç•™é—®é¢˜ã€‚åœ¨æ—©æœŸï¼ŒåŒå¼•å·è¢«è®¾è®¡ä¸ºå­—ç¬¦åˆ—è¡¨ã€‚ä¸ºäº†å‘åå…¼å®¹ï¼Œè¿™ä¸ªè®¾è®¡è¢«ä¿ç•™äº†ä¸‹æ¥ã€‚ç°ä»£ Erlang ç¼–ç¨‹ä¸­ï¼Œä½ å‡ ä¹æ€»åº”è¯¥ä½¿ç”¨ `<<"...">>` å½¢å¼çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²ã€‚

**äºŒè¿›åˆ¶çš„å¼ºå¤§ä¹‹å¤„ï¼šæ¨¡å¼åŒ¹é…**
äºŒè¿›åˆ¶ç±»å‹æ˜¯ Erlang çš„ä¸€å¤§æ³•å®ï¼Œå°¤å…¶é€‚åˆå¤„ç†ç½‘ç»œåè®®ã€è§£æäºŒè¿›åˆ¶æ–‡ä»¶ç­‰ã€‚è¿™æ˜¯ Java ä¸­éœ€è¦ç”¨ `ByteBuffer` ç­‰å·¥å…·ç¹çå¤„ç†çš„åœºæ™¯ã€‚

```erlang
% ä» HTTP å¤´ä¸­è§£æå†…å®¹é•¿åº¦
Header = <<"Content-Length: 1024\r\n">>,
<< "Content-Length: ", LengthStr/binary >> = Header, % åŒ¹é…å‰ç¼€
Length = binary_to_integer(LengthStr). % Length = 1024
```

### 1.4 å˜é‡ä¸æ¨¡å¼åŒ¹é… - `=` ä¸æ˜¯èµ‹å€¼ï¼Œæ˜¯æ–­è¨€ï¼

Java å¼€å‘è€…çœ‹åˆ° `=` ä¼šä¸‹æ„è¯†åœ°è®¤ä¸ºæ˜¯â€œèµ‹å€¼â€ã€‚åœ¨ Erlang ä¸­ï¼Œè¯·å½»åº•æŠ›å¼ƒè¿™ä¸ªæƒ³æ³•ã€‚

**Erlang çš„ `=` æ˜¯â€œåŒ¹é…è¿ç®—ç¬¦â€ï¼Œå®ƒæ›´åƒä¸€ä¸ªâ€œæ–­è¨€ (Assertion)â€**ã€‚

-   **å•æ¬¡ç»‘å®š**ï¼šæ‰€æœ‰ Erlang å˜é‡éƒ½**åªèƒ½è¢«ç»‘å®šä¸€æ¬¡**ã€‚å®ƒä»¬å°±åƒ Java ä¸­çš„ `final` å˜é‡ã€‚
-   **`=` çš„å·¥ä½œåŸç†**ï¼š
    1.  å½“ `=` å·¦è¾¹çš„å˜é‡**æœªè¢«ç»‘å®š**æ—¶ï¼ŒErlang ä¼šå°è¯•é€šè¿‡ç»‘å®šè¯¥å˜é‡ï¼Œæ¥ä½¿å¾— `=` ä¸¤è¾¹ç›¸ç­‰ã€‚
    2.  å½“ `=` å·¦è¾¹çš„å˜é‡**å·²è¢«ç»‘å®š**æ—¶ï¼Œ`=` å°±å˜æˆä¸€ä¸ª**æ–­è¨€**ï¼Œå®ƒä¼šåˆ¤æ–­ä¸¤è¾¹çš„å€¼æ˜¯å¦ç›¸ç­‰ã€‚å¦‚æœç›¸ç­‰ï¼Œè¡¨è¾¾å¼æˆåŠŸï¼›å¦‚æœä¸ç­‰ï¼Œ**ç«‹å³å´©æºƒ**å¹¶æŠ›å‡º `badmatch` é”™è¯¯ã€‚

```erlang
% 1. å·¦è¾¹å˜é‡ X æœªç»‘å®š
X = 5.
% è¿™ä¸æ˜¯ "æŠŠ 5 èµ‹ç»™ X"ï¼Œè€Œæ˜¯ "æˆ‘å£°ç§° X ç­‰äº 5"ã€‚
% ä¸ºäº†è®©è¿™ä¸ªå£°ç§°æˆç«‹ï¼ŒErlang æŠŠ X ç»‘å®šåˆ° 5ã€‚

% 2. å·¦è¾¹å˜é‡ Y å·²ç»‘å®š
Y = 10,
Y = 10. % æ­£ç¡®ï¼å£°ç§° "10 ç­‰äº 10"ï¼Œæ–­è¨€æˆåŠŸã€‚

% 3. æ–­è¨€å¤±è´¥ -> å´©æºƒï¼
Z = 15,
Z = 20. % âŒ badmatch é”™è¯¯ï¼å£°ç§° "15 ç­‰äº 20"ï¼Œæ–­è¨€å¤±è´¥ã€‚
```

**æ¨¡å¼åŒ¹é…ï¼šå¼ºå¤§çš„è§£æ„èƒ½åŠ›**
è¿™ä¸ªâ€œæ–­è¨€â€æœºåˆ¶å»¶ä¼¸åˆ°å¤æ‚çš„æ•°æ®ç»“æ„ä¸Šï¼Œå°±å½¢æˆäº†æå…¶å¼ºå¤§çš„æ¨¡å¼åŒ¹é…ï¼ˆæˆ–ç§°â€œè§£æ„â€ï¼‰ã€‚

```erlang
% è§£æ„å…ƒç»„
{ok, Value} = {ok, "some data"}.
% å£°ç§°å·¦è¾¹æ¨¡å¼åŒ¹é…å³è¾¹å€¼ã€‚
% ä¸ºä½¿å£°ç§°æˆç«‹ï¼ŒErlang å°† Value ç»‘å®šåˆ° "some data"ã€‚

% å¦‚æœ API è¿”å›äº†é”™è¯¯
{ok, OtherValue} = {error, "not found"}.
% âŒ badmatch é”™è¯¯ï¼å› ä¸ºåŸå­ ok ä¸ç­‰äº errorã€‚
% è¿™è®©ä½ çš„ä»£ç åœ¨å¤„ç†éé¢„æœŸè¿”å›å€¼æ—¶ä¼šç«‹å³å¤±è´¥ï¼Œè€Œä¸æ˜¯æŠŠé”™è¯¯å¸¦åˆ°æ›´æ·±çš„åœ°æ–¹ã€‚

% è§£æ„åˆ—è¡¨
[Head | Tail] = [1, 2, 3].
% Head ä¼šè¢«ç»‘å®šåˆ° 1
% Tail ä¼šè¢«ç»‘å®šåˆ° [2, 3]
```

è¿™ä¸ªæœºåˆ¶æ˜¯ Erlang ç¼–ç¨‹çš„åŸºçŸ³ï¼Œå®ƒè®©ä»£ç æå…¶ç®€æ´å¹¶å¼ºåˆ¶ä½ å¤„ç†æ‰€æœ‰å¯èƒ½çš„æƒ…å†µã€‚

## Day 2: æ•°æ®ç»“æ„ï¼ˆData Structuresï¼‰

### 2.1 åˆ—è¡¨ (Lists) - Java çš„ ArrayList/LinkedList

```java
// Java çš„ ArrayList
List<String> names = Arrays.asList("Alice", "Bob", "Charlie");
names.get(0);      // "Alice"
names.size();      // 3
```

```erlang
% Erlang çš„åˆ—è¡¨ï¼ˆé“¾è¡¨å®ç°ï¼‰
Names = ["Alice", "Bob", "Charlie"],
[H|T] = Names,     % H="Alice", T=["Bob","Charlie"]
length(Names),     % 3
hd(Names),         % "Alice" (å¤´å…ƒç´ )
tl(Names),         % ["Bob","Charlie"] (å°¾åˆ—è¡¨)

% æ“ä½œ
[0|Names],         % [0,"Alice","Bob","Charlie"] (å¤´éƒ¨æ·»åŠ  O(1))
Names ++ ["Dave"], % ["Alice","Bob","Charlie","Dave"] (è¿æ¥ O(n))
lists:nth(2, Names), % "Bob" (1ç´¢å¼•ï¼)
lists:reverse(Names). % ["Charlie","Bob","Alice"]
```

**åˆ—è¡¨ç‰¹æ€§ï¼š**
- **é“¾è¡¨ç»“æ„**ï¼šå¤´éƒ¨æ“ä½œ O(1)ï¼Œå°¾éƒ¨æ“ä½œ O(n)
- æ”¯æŒ**æ¨¡å¼åŒ¹é…**ï¼š`[H|T]` è¯­æ³•
- å¯ä»¥åŒ…å«**ä»»æ„ç±»å‹**çš„å…ƒç´ 

### 2.2 å…ƒç»„ (Tuples) - Java çš„å›ºå®šæ•°ç»„

```java
// Java çš„å›ºå®šæ•°ç»„
String[] person = {"Alice", "25", "Engineer"};
```

```erlang
% Erlang çš„å…ƒç»„ï¼ˆç±»å‹å®‰å…¨ï¼Œå›ºå®šå¤§å°ï¼‰
Person = {"Alice", 25, engineer},     % æ³¨æ„ï¼šåŸå­ä¸ç”¨å¼•å·
{Name, Age, Job} = Person,            % è§£æ„èµ‹å€¼
element(2, Person),                   % 25 (1ç´¢å¼•ï¼)
tuple_size(Person),                   % 3
setelement(3, Person, manager).       % {"Alice",25,manager}
```

**å…ƒç»„ vs åˆ—è¡¨ï¼š**
- å…ƒç»„ï¼š**å›ºå®šå¤§å°**ï¼Œéšæœºè®¿é—®å¿«ï¼Œç±»å‹å®‰å…¨
- åˆ—è¡¨ï¼š**å¯å˜é•¿åº¦**ï¼Œå¤´éƒ¨æ“ä½œå¿«
- å…ƒç»„å¸¸ç”¨äº**å¤åˆæ•°æ®**ï¼ˆå¦‚å‡½æ•°è¿”å›å€¼ï¼‰

### 2.3 æ˜ å°„ (Maps) - Java çš„ HashMap

```java
// Java çš„ HashMap
Map<String, Object> user = new HashMap<>();
user.put("name", "Alice");
user.put("age", 25);
```

```erlang
% Erlang çš„æ˜ å°„ï¼ˆç°ä»£ï¼Œé«˜æ•ˆï¼‰
% æ˜ å°„çš„é”®å¯ä»¥æ˜¯äºŒè¿›åˆ¶ï¼Œä¹Ÿå¯ä»¥æ˜¯åŸå­ï¼Œå¦‚ #{name => <<"Alice">>, ...}
User = #{
    <<"name">> => <<"Alice">>,
    <<"age">> => 25,
    <<"active">> => true
},

% è®¿é—®
maps:get(<<"name">>, User),              % <<"Alice">>
maps:get(<<"email">>, User, <<"N/A">>),  % é»˜è®¤å€¼

% æ›´æ–°
User#{<<"email">> => <<"alice@example.com">>},  % æ·»åŠ /æ›´æ–°
User#{<<"age">> := 26},                        % æ›´æ–°ï¼ˆå¿…é¡»å­˜åœ¨ï¼‰
maps:remove(<<"active">>, User),               % åˆ é™¤

% æ“ä½œ
maps:size(User),         % å¤§å°
maps:keys(User),         % [<<"name">>, <<"age">>, <<"active">>]
maps:values(User).       % [<<"Alice">>, 25, true]
```

### 2.4 è®°å½• (Records) - Java çš„ç±»/struct

```java
// Java çš„ç±»
public class User {
    private String name;
    private int age;
    private boolean active = true;
    // getters/setters...
}
```

**ä¸ Java çš„åŒºåˆ«**ï¼šErlang è®°å½•æ›´åƒä¸€ä¸ªå…¬å…±çš„ã€ä¸å¯å˜çš„ç»“æ„ä½“ã€‚ç”±äºæ•°æ®ä¸å¯å˜ï¼Œæ²¡æœ‰ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„"setter"æ–¹æ³•ï¼Œè®¿é—®å­—æ®µæ˜¯ç›´æ¥çš„ã€‚

```erlang
% Erlang çš„è®°å½•ï¼ˆç¼–è¯‘æ—¶ç±»å‹ï¼‰
-record(user, {
    name,
    age = 0,
    active = true
}).

% ä½¿ç”¨
User = #user{name = <<"Alice">>, age = 25},
User#user.name,      % <<"Alice">>
User#user.age,       % 25
User#user.active,    % true

% æ›´æ–°
User2 = User#user{age = 26, active = false}. % åˆ›å»ºä¸€ä¸ªæ–°çš„è®°å½•å‰¯æœ¬ï¼ŒUser ä¿æŒä¸å˜
```

**è®°å½•ç‰¹æ€§ï¼š**
- **ç¼–è¯‘æ—¶æ£€æŸ¥**ï¼šå­—æ®µååœ¨ç¼–è¯‘æ—¶éªŒè¯
- **ç±»å‹å®‰å…¨**ï¼šæ¯” Map æ›´å®‰å…¨
- **æ¨¡å¼åŒ¹é…**ï¼š`#user{name = Name}`

#### Maps vs Recordsï¼šå¦‚ä½•é€‰æ‹©ï¼Ÿ

| ç‰¹æ€§ | æ˜ å°„ (Maps) | è®°å½• (Records) |
| :--- | :--- | :--- |
| å­—æ®µæ£€æŸ¥ | è¿è¡Œæ—¶ (é”®å¯èƒ½ä¸å­˜åœ¨) | ç¼–è¯‘æ—¶ (å­—æ®µåé”™è¯¯ä¼šè¢«æ•è·) |
| é”® | åŠ¨æ€ï¼Œä»»æ„ç±»å‹ | é¢„å®šä¹‰çš„åŸå­ |
| å®šä¹‰ | æ— éœ€é¢„å®šä¹‰ | å¿…é¡»ç”¨ `-record(...)` é¢„å®šä¹‰ |
| é€‚ç”¨åœºæ™¯ | å¤„ç†åŠ¨æ€æˆ–éç»“æ„åŒ–æ•°æ®ï¼Œå¦‚ JSON payload | å®šä¹‰ç»“æ„åŒ–çš„å†…éƒ¨çŠ¶æ€ï¼ŒAPI æ•°æ®æ¨¡å‹ |
| ç»“è®º | çµæ´»ï¼Œç”¨äºå¤–éƒ¨æ•°æ® | å®‰å…¨ï¼Œç”¨äºå†…éƒ¨æ•°æ® |

## Day 3: å‡½æ•°åŸºç¡€ï¼ˆFunctionsï¼‰

### 3.1 å‡½æ•°å®šä¹‰ä¸è°ƒç”¨

```java
// Java çš„æ–¹æ³•
public int add(int a, int b) {
    return a + b;
}
```

```erlang
% Erlang çš„å‡½æ•°ï¼ˆå¤šå­å¥ï¼‰
add(A, B) ->
    A + B.

% å¤šå­å¥å‡½æ•°ï¼ˆæ¨¡å¼åŒ¹é…ï¼‰
factorial(0) -> 1;
factorial(N) -> N * factorial(N - 1).

% åŒ¿åå‡½æ•°ï¼ˆJava çš„ lambdaï¼‰
Double = fun(X) -> X * 2 end,
Double(5).          % 10

% é«˜é˜¶å‡½æ•°
lists:map(fun(X) -> X * 2 end, [1,2,3]). % [2,4,6]
```

### 3.2 å®ˆå« (Guards) - Java çš„æ¡ä»¶åˆ¤æ–­

**ä»€ä¹ˆæ˜¯å®ˆå«è¡¨è¾¾å¼ï¼Ÿ**
- å®ˆå«ï¼ˆGuardï¼‰æ˜¯ Erlang ä¸­ç‰¹æ®Šçš„**æ¡ä»¶è¡¨è¾¾å¼**
- åªèƒ½ä½¿ç”¨**çº¯å‡½æ•°**å’Œ**å†…ç½®å®ˆå«å‡½æ•°**
- **ä¸èƒ½æœ‰å‰¯ä½œç”¨**ï¼ˆä¸èƒ½ä¿®æ”¹å˜é‡ã€è°ƒç”¨æ™®é€šå‡½æ•°ï¼‰
- `when` å…³é”®å­—ç”¨æ¥**å¼•å…¥å®ˆå«è¡¨è¾¾å¼**

```java
// Java çš„æ¡ä»¶åˆ¤æ–­
public boolean isAdult(int age) {
    return age >= 18 && age <= 120;
}
```

```erlang
% Erlang çš„å®ˆå«è¡¨è¾¾å¼ï¼ˆå‡½æ•°å¤´ä¸­çš„é¢å¤–æ¡ä»¶ï¼‰
is_adult(Age) when Age >= 18, Age =< 120 -> true;
is_adult(_) -> false.

% å®ˆå«è¡¨è¾¾å¼çš„ä¾‹å­
is_valid(Age) when is_integer(Age), Age > 0 -> true;
is_valid(_) -> false.

% å†…ç½®å®ˆå«å‡½æ•°ï¼ˆåªèƒ½åœ¨å®ˆå«ä¸­ä½¿ç”¨ï¼‰
is_number(X), is_integer(X), is_float(X),
is_atom(X), is_binary(X), is_list(X), is_tuple(X).

% å®ˆå«ä¸­ä¸èƒ½è°ƒç”¨è‡ªå®šä¹‰å‡½æ•°
is_special_number(N) -> N =:= 42.

% âŒ ä¸‹é¢çš„ä»£ç æ— æ³•ç¼–è¯‘ï¼
% my_func(X) when is_special_number(X) -> true;
% my_func(_) -> false.

% å®ˆå« vs æ™®é€šæ¡ä»¶
check_age(Age) ->
    if Age >= 18 -> adult;    % æ™®é€šæ¡ä»¶ï¼ˆå¯ä»¥æœ‰å‰¯ä½œç”¨ï¼‰
       true -> minor
    end.

check_age_guard(Age) when Age >= 18 -> adult;  % å®ˆå«ï¼ˆçº¯å‡½æ•°ï¼‰
check_age_guard(_) -> minor.
```

**å®ˆå«å¯ä»¥æ£€æŸ¥ï¼š**
- ç±»å‹ï¼š`is_integer(X)`, `is_atom(X)`
- å€¼ï¼š`X > 0`, `X =:= 42`
- å¤šä¸ªæ¡ä»¶ï¼šç”¨é€—å·åˆ†éš”ï¼ˆANDï¼‰

### 3.3 å‡½æ•°ä¸­çš„æ¨¡å¼åŒ¹é…

```erlang
% å‚æ•°ä¸­çš„æ¨¡å¼åŒ¹é… (ä½¿ç”¨é«˜æ•ˆçš„äºŒè¿›åˆ¶æ„å»º)
handle_result({ok, Data}) when is_binary(Data) ->
    <<"æˆåŠŸ: ", Data/binary>>;
handle_result({error, Reason}) when is_binary(Reason) ->
    <<"å¤±è´¥: ", Reason/binary>>.

% åˆ—è¡¨å¤„ç†
sum([]) -> 0;
sum([H|T]) -> H + sum(T).

% äºŒè¿›åˆ¶æ¨¡å¼åŒ¹é…
parse_header(<<Length:16, Type:8, Rest/binary>>) ->
    {Length, Type, Rest}.

% è®°å½•æ¨¡å¼åŒ¹é…
handle_user(#user{name = Name, age = Age}) when Age >= 18 andalso is_binary(Name) ->
    <<"æˆäººç”¨æˆ·: ", Name/binary>>;
handle_user(#user{name = Name}) when is_binary(Name) ->
    <<"æœªæˆå¹´ç”¨æˆ·: ", Name/binary>>.
```

## Day 4: æ§åˆ¶æµï¼ˆControl Flowï¼‰

### 4.1 case è¡¨è¾¾å¼

```java
// Java çš„ switch
switch (status) {
    case "ok": return "æˆåŠŸ";
    case "error": return "å¤±è´¥";
    default: return "æœªçŸ¥";
}
```

```erlang
% Erlang çš„ caseï¼ˆæ›´å¼ºå¤§ï¼‰
Result = case Status of
    ok -> "æˆåŠŸ";
    error -> "å¤±è´¥";
    pending -> "ç­‰å¾…ä¸­";
    _ -> "æœªçŸ¥"  % é€šé…ç¬¦
end,
Result.
```

### 4.2 if è¡¨è¾¾å¼ï¼ˆä¸å¸¸ç”¨ï¼‰

```erlang
% Erlang çš„ ifï¼ˆå¸¦å®ˆå«ï¼‰
Result = if
    X > 10 -> "å¤§";
    X < 0 -> "è´Ÿ";
    X == 0 -> "é›¶";
    true -> "æ­£"  % å¿…é¡»æœ‰ true å­å¥
end.

% ä¸ºä»€ä¹ˆ if ä¸å¸¸ç”¨ï¼Ÿ
% å› ä¸º if æ˜¯ case çš„è¯­æ³•ç³–ï¼Œåªèƒ½ä½¿ç”¨å®ˆå«è¡¨è¾¾å¼
% case å¯ä»¥åŒ¹é…ä»»æ„æ¨¡å¼ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§

% ç­‰ä»·çš„ case å†™æ³•ï¼ˆæ¨èï¼‰
Result2 = case X of
    X when X > 10 -> "å¤§";
    X when X < 0 -> "è´Ÿ";
    0 -> "é›¶";
    _ -> "æ­£"
end.
```

### 4.3 é€’å½’ - Erlang çš„å¾ªç¯

```java
// Java çš„å¾ªç¯
public int sum(List<Integer> list) {
    int total = 0;
    for (int num : list) {
        total += num;
    }
    return total;
}
```

```erlang
% Erlang çš„å°¾é€’å½’ï¼ˆä¼˜åŒ–ï¼‰
sum(List) -> sum(List, 0).
sum([], Acc) -> Acc;
sum([H|T], Acc) -> sum(T, H + Acc).

% é˜¶ä¹˜
factorial(N) -> factorial(N, 1).
factorial(0, Acc) -> Acc;
factorial(N, Acc) -> factorial(N-1, N*Acc).

% åˆ—è¡¨åè½¬
reverse(List) -> reverse(List, []).
reverse([], Acc) -> Acc;
reverse([H|T], Acc) -> reverse(T, [H|Acc]).
```

### 4.4 é«˜é˜¶å‡½æ•°

```java
// Java çš„å‡½æ•°å¼æ¥å£
list.stream()
    .map(x -> x * 2)
    .filter(x -> x > 10)
    .collect(Collectors.toList());
```

```erlang
% Erlang çš„é«˜é˜¶å‡½æ•°
Double = fun(X) -> X * 2 end,
IsBig = fun(X) -> X > 10 end,

Numbers = [1, 2, 3, 4, 5],
Doubled = lists:map(Double, Numbers),     % [2,4,6,8,10]
BigOnes = lists:filter(IsBig, Doubled),   % [12,14,16,18,20]
Sum = lists:foldl(fun(X, Acc) -> X + Acc end, 0, BigOnes). % 70

% åˆ—è¡¨æ¨å¯¼å¼ï¼ˆå¼ºå¤§çš„è¯­æ³•ç³–ï¼‰
[X*2 || X <- [1,2,3,4,5]],             % [2,4,6,8,10] - åŸºç¡€ç”¨æ³•
[X || X <- [1,2,3,4,5], X > 2],        % [3,4,5] - å¸¦æ¡ä»¶
[{X,Y} || X <- [1,2], Y <- [a,b]].     % [{1,a},{1,b},{2,a},{2,b}] - ç¬›å¡å°”ç§¯
```

## Day 5: å¹¶å‘ç¼–ç¨‹ï¼ˆConcurrencyï¼‰

### 5.1 è¿›ç¨‹ä¸æ¶ˆæ¯ä¼ é€’

```java
// Java çš„çº¿ç¨‹
Thread thread = new Thread(() -> {
    System.out.println("Hello from thread!");
});
thread.start();
```

```erlang
% Erlang çš„è¿›ç¨‹ï¼ˆè¶…è½»é‡ï¼ï¼‰
Pid = spawn(fun() ->
    io:format("Hello from process!~n")
end),
io:format("Created process: ~p~n", [Pid]).

% æ¶ˆæ¯ä¼ é€’
Sender = self(),
spawn(fun() ->
    Sender ! {hello, "from child process"}
end),

receive
    {hello, Message} ->
        io:format("Received: ~s~n", [Message])
after 1000 ->
    timeout
end.
```

### 5.2 è¿›ç¨‹é“¾æ¥ä¸ç›‘æ§

**é“¾æ¥ (Linking)**ï¼šå¯ä»¥æƒ³è±¡æˆ"å…±äº«å‘½è¿"ã€‚å¦‚æœä¸€å¯¹é“¾æ¥è¿›ç¨‹ä¸­æœ‰ä¸€ä¸ªå› é”™è¯¯æ­»äº¡ï¼Œå®ƒä¼šå‘é€é€€å‡ºä¿¡å·ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰ç»ˆæ­¢å¦ä¸€ä¸ªã€‚è¿™åˆ›å»ºäº†ä¸€ç§ä¾èµ–å…³ç³»ï¼Œå°±åƒä¸¤ä¸ªæ— æ³•å•ç‹¬è¿è¡Œçš„å¾®æœåŠ¡ã€‚

**ç›‘æ§ (Monitoring)**ï¼šå¯ä»¥æƒ³è±¡æˆ"äº‹ä»¶ç›‘å¬å™¨"ã€‚ç›‘æ§è¿›ç¨‹è®¢é˜…è¢«ç›‘æ§è¿›ç¨‹çš„"down"äº‹ä»¶ã€‚å¦‚æœç›®æ ‡è¿›ç¨‹æ­»äº¡ï¼Œç›‘æ§è¿›ç¨‹ä¼šæ”¶åˆ°æ¶ˆæ¯ä½†ä¸ä¼šè¢«è¿«æ­»äº¡ã€‚è¿™æ˜¯ä¸€ç§å•å‘çš„æ„ŸçŸ¥å…³ç³»ã€‚

```erlang
% é“¾æ¥è¿›ç¨‹ï¼ˆå´©æºƒä¼ æ’­ï¼‰
Parent = self(),
Child = spawn_link(fun() ->
    timer:sleep(1000),
    exit(crash)  % å´©æºƒ
end),

process_flag(trap_exit, true),
receive
    {'EXIT', Child, Reason} ->
        io:format("Child crashed: ~p~n", [Reason])
end.

% ç›‘æ§è¿›ç¨‹ï¼ˆå•å‘ï¼‰
Ref = monitor(process, Child),
receive
    {'DOWN', Ref, process, Child, Reason} ->
        io:format("Child down: ~p~n", [Reason])
end.
```

### 5.3 gen_server

gen_server æ˜¯ OTPï¼ˆOpen Telecom Platformï¼‰ä¸­çš„æ ¸å¿ƒç»„ä»¶ï¼Œç”¨äºæ„å»ºæ ‡å‡†åŒ–çš„ã€æœ‰çŠ¶æ€çš„æœåŠ¡å™¨è¿›ç¨‹ã€‚å®ƒå°è£…äº†æ¶ˆæ¯å¾ªç¯ã€é”™è¯¯å¤„ç†å’Œé€šç”¨è¡Œä¸ºï¼Œè®©å¼€å‘è€…èƒ½æ›´ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸ç”¨é‡å¤ç¼–å†™åº•å±‚å¹¶å‘ä»£ç ã€‚

```erlang
-module(counter).
-behaviour(gen_server).

% API
-export([start_link/0, increment/0, get/0]).
-export([init/1, handle_call/3, handle_cast/2, terminate/2]).

start_link() ->
    gen_server:start_link({local, ?MODULE}, ?MODULE, 0, []).

increment() ->
    gen_server:cast(?MODULE, increment).

get() ->
    gen_server:call(?MODULE, get).

% Callbacks
init(InitialCount) ->
    {ok, InitialCount}.

handle_call(get, _From, Count) ->
    {reply, Count, Count};

handle_cast(increment, Count) ->
    {noreply, Count + 1}.

terminate(_Reason, _State) ->
    ok.
```

### 5.4 Supervisor

```erlang
-module(my_supervisor).
-behaviour(supervisor).

-export([start_link/0, init/1]).

start_link() ->
    supervisor:start_link({local, ?MODULE}, ?MODULE, []).

init([]) ->
    SupFlags = #{
        strategy => one_for_one,  % å´©æºƒç­–ç•¥
        % one_for_one: åªé‡å¯å´©æºƒçš„å­è¿›ç¨‹ (å¸¸ç”¨)
        % one_for_all: å¦‚æœä¸€ä¸ªå­è¿›ç¨‹å´©æºƒï¼Œé‡å¯æ‰€æœ‰å…¶ä»–å­è¿›ç¨‹ (ç”¨äºç»„ä»¶é—´ç´§å¯†è€¦åˆ)
        % rest_for_one: å¦‚æœä¸€ä¸ªå­è¿›ç¨‹å´©æºƒï¼Œé‡å¯åœ¨å®ƒä¹‹åå¯åŠ¨çš„æ‰€æœ‰å…„å¼Ÿè¿›ç¨‹
        intensity => 5,          % åœ¨ `period` ç§’å†…æœ€å¤§é‡å¯æ¬¡æ•°
        period => 60             % æ—¶é—´çª—å£ï¼ˆç§’ï¼‰
    },

    ChildSpecs = [
        #{
            id => counter,
            start => {counter, start_link, []},
            restart => permanent,    % æ€»æ˜¯é‡å¯
            shutdown => 5000,
            type => worker
        }
    ],

    {ok, {SupFlags, ChildSpecs}}.
```

### 5.5 Application

```erlang
-module(my_app).
-behaviour(application).

-export([start/2, stop/1]).

start(_Type, _Args) ->
    my_supervisor:start_link().

stop(_State) ->
    ok.

% my_app.app é…ç½®æ–‡ä»¶
{application, my_app, [
    {description, "My Application"},
    {vsn, "1.0.0"},
    {modules, [my_app, my_supervisor, counter]},
    {registered, [my_supervisor, counter]},
    {applications, [kernel, stdlib]},
    {mod, {my_app, []}}
]}.
```

## Day 6: æ ‡å‡†åº“ï¼ˆStandard Libraryï¼‰

### 6.1 é”™è¯¯å¤„ç† (try/catch/after) - è§£æ„ Erlang çš„å¼‚å¸¸æ¨¡å‹

å¯¹äº Java å¼€å‘è€…æ¥è¯´ï¼ŒErlang çš„é”™è¯¯å¤„ç†æœºåˆ¶åˆçœ‹èµ·æ¥å¯èƒ½æœ‰äº›å¥‡ç‰¹ï¼Œä½†å®ƒä¸ OTP çš„â€œä»»å…¶å´©æºƒ (Let it Crash)â€å“²å­¦ç´§å¯†ç›¸è¿ã€‚è®©æˆ‘ä»¬å…ˆä»æ‚¨æœ€å›°æƒ‘çš„ `try...catch` è¯­æ³•å¼€å§‹ï¼Œå½»åº•æ‹†è§£å®ƒã€‚

#### æ·±å…¥è§£æ `catch` å­å¥ï¼š`Class:Reason`

åœ¨ Java ä¸­ï¼Œ`catch` å—æ•è·çš„æ˜¯ä¸€ä¸ª `Exception` å¯¹è±¡ï¼Œä¾‹å¦‚ `catch (IOException e)`ã€‚åœ¨ Erlang ä¸­ï¼Œ`catch` å—ä½¿ç”¨çš„æ˜¯**æ¨¡å¼åŒ¹é…**æ¥æ•è·ä¸€ä¸ªç»“æ„åŒ–çš„å¼‚å¸¸â€œä¿¡å·â€ã€‚

æ‚¨çœ‹åˆ°çš„ `error:Reason` å°±æ˜¯ä¸€ä¸ªæ¨¡å¼åŒ¹é…è¡¨è¾¾å¼ï¼Œå…¶è¯­æ³•æ˜¯ `Class:Reason`ã€‚

-   **`Class` (ç±»åˆ«)**ï¼šè¿™æ˜¯ä¸€ä¸ª**åŸå­**ï¼Œç”¨æ¥æ ‡è¯†å¼‚å¸¸çš„â€œç±»å‹â€ã€‚å®ƒä¸»è¦æœ‰ä¸‰ç§ï¼š`error`ã€`exit` å’Œ `throw`ã€‚è¿™æœ‰ç‚¹åƒ Java ä¸­ `Throwable` çš„ä¸‰ä¸ªä¸»è¦å­ç±»ï¼š`Error`ã€`Exception` å’Œ `RuntimeException`ï¼Œä½†ç”¨é€”å’Œè¯­ä¹‰æœ‰å¾ˆå¤§ä¸åŒã€‚
-   **`Reason` (åŸå› )**ï¼šè¿™æ˜¯ä¸€ä¸ª**å˜é‡**ï¼Œç”¨æ¥ç»‘å®šå¼‚å¸¸çš„â€œåŸå› â€æˆ–â€œè´Ÿè½½â€ã€‚å®ƒå¯ä»¥æ˜¯ä»»ä½• Erlang çš„æ•°æ®ç±»å‹ï¼ˆä¸€ä¸ªåŸå­ã€ä¸€ä¸ªå…ƒç»„ã€ä¸€ä¸ªå­—ç¬¦ä¸²ç­‰ï¼‰ã€‚è¿™ç›¸å½“äº Java å¼‚å¸¸å¯¹è±¡ä¸­çš„ `message` æˆ–å…¶ä»–å­—æ®µã€‚
-   **`:` (å†’å·)**ï¼šè¿™æ˜¯åˆ†éš” `Class` å’Œ `Reason` çš„è¯­æ³•ã€‚

æ‰€ä»¥ï¼Œ`catch error:Reason -> ...` çš„æ„æ€æ˜¯ï¼š
> â€œæ•è·ä¸€ä¸ª**ç±»åˆ«**ä¸º `error` çš„å¼‚å¸¸ï¼Œå¹¶å°†å…¶**åŸå› **ç»‘å®šåˆ°å˜é‡ `Reason` ä¸Šï¼Œç„¶åæ‰§è¡Œ `->` åé¢çš„ä»£ç ã€‚â€

**ä¸€ä¸ªå®Œæ•´çš„ `try...catch` å—å¦‚ä¸‹ï¼š**

```erlang
try
    % è¿™é‡Œæ˜¯å¯èƒ½ä¼šâ€œçˆ†ç‚¸â€çš„ä»£ç 
    1 / 0
catch
    % Class:Reason -> Body;
    error:badarith ->
        % åŒ¹é…ä¸€ä¸ªç±»åˆ«ä¸º errorï¼ŒåŸå› ä¸º badarith çš„å¼‚å¸¸
        io:format("ç®—æœ¯é”™è¯¯å‘ç”Ÿäº†!~n");

    error:Reason ->
        % åŒ¹é…æ‰€æœ‰å…¶ä»–ç±»åˆ«ä¸º error çš„å¼‚å¸¸ï¼Œå¹¶å°†åŸå› ç»‘å®šåˆ° Reason
        io:format("æ•è·åˆ°ä¸€ä¸ªè¿è¡Œæ—¶é”™è¯¯: ~p~n", [Reason]);

    throw:ThrownValue ->
        % åŒ¹é…ä¸€ä¸ªç±»åˆ«ä¸º throw çš„å¼‚å¸¸ï¼Œå¹¶å°†æŠ›å‡ºçš„å€¼ç»‘å®šåˆ° ThrownValue
        io:format("æ•è·åˆ°ä¸€ä¸ªæŠ›å‡ºå€¼: ~p~n", [ThrownValue]);

    exit:ExitSignal ->
        % åŒ¹é…ä¸€ä¸ªç±»åˆ«ä¸º exit çš„å¼‚å¸¸ï¼Œå¹¶å°†é€€å‡ºä¿¡å·ç»‘å®šåˆ° ExitSignal
        io:format("æ•è·åˆ°ä¸€ä¸ªé€€å‡ºä¿¡å·: ~p~n", [ExitSignal])
after
    % è¿™é‡Œçš„ä»£ç æ€»ä¼šæ‰§è¡Œï¼Œæ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸
    % ç±»ä¼¼äº Java çš„ finally å—
    io:format("æ¸…ç†å·¥ä½œå®Œæˆã€‚~n")
end.
```

#### Erlang å¼‚å¸¸ä¸‰å·¨å¤´ vs. Java çš„ `Throwable`

ä¸ºäº†æ›´å¥½åœ°ç†è§£ï¼Œæˆ‘ä»¬å°† Erlang çš„ä¸‰ç§å¼‚å¸¸ç±»å‹ä¸ Java çš„å¼‚å¸¸ä½“ç³»è¿›è¡Œç±»æ¯”ï¼š

| Erlang å¼‚å¸¸ | è§¦å‘æ–¹å¼ | Java ç±»æ¯” | ç”¨é€”å’Œå“²å­¦ |
| :--- | :--- | :--- | :--- |
| **`error`** | è‡ªåŠ¨è§¦å‘ (å¦‚ `1/0`) æˆ–æ‰‹åŠ¨ `erlang:error(Reason)` | **`java.lang.RuntimeException`** (å¦‚ `NullPointerException`, `ArithmeticException`) | **ä»£è¡¨ç¨‹åºç¼ºé™· (Bug)**ã€‚ä½ ä¸åº”è¯¥è¯•å›¾åœ¨æœ¬åœ°æ•è·å®ƒä»¬ã€‚æ­£ç¡®çš„åšæ³•æ˜¯â€œä»»å…¶å´©æºƒâ€ï¼Œè®© Supervisor æ¥å¤„ç†ã€‚çœ‹åˆ° `error`ï¼Œå°±æ„å‘³ç€ä½ éœ€è¦ä¿®å¤ä»£ç ã€‚ |
| **`exit`** | `exit(Reason)` | **`System.exit()` / `Thread.interrupt()` / è¿›ç¨‹é—´ä¿¡å·** | **ä»£è¡¨è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸäº‹ä»¶**ã€‚å®ƒä¸æ˜¯ä¸€ä¸ªä¼ ç»Ÿæ„ä¹‰ä¸Šçš„â€œé”™è¯¯â€ï¼Œè€Œæ˜¯ä¸€ä¸ªè¿›ç¨‹é€šçŸ¥å…¶ä»–ï¼ˆé€šå¸¸æ˜¯é“¾æ¥çš„ï¼‰è¿›ç¨‹å®ƒè¦â€œæ­»äº¡â€çš„ä¿¡å·ã€‚`exit(normal)` æ˜¯æ­£å¸¸é€€å‡ºã€‚`Supervisor` æ­£æ˜¯ä¾èµ–æ•è·å­è¿›ç¨‹çš„ `exit` ä¿¡å·æ¥å†³å®šæ˜¯å¦é‡å¯å®ƒä»¬ã€‚ |
| **`throw`** | `throw(Value)` | **`CheckedException` / `break` / `return`** | **ä»£è¡¨éæœ¬åœ°è¿”å› (Non-local Return)**ã€‚å½“ä½ éœ€è¦ä»ä¸€ä¸ªæ·±åº¦åµŒå¥—çš„å‡½æ•°è°ƒç”¨ä¸­â€œè·³å‡ºâ€å¹¶è¿”å›ä¸€ä¸ªå€¼æ—¶ä½¿ç”¨ã€‚å®ƒç”¨äºå¤„ç†**å¯é¢„æœŸçš„ã€éé”™è¯¯çš„**æ§åˆ¶æµå˜æ›´ï¼Œè€Œä¸æ˜¯æ„å¤–çš„å¤±è´¥ã€‚ |

#### ä»£ç ç¤ºä¾‹ï¼šè§¦å‘ä¸æ•è·

**1. `error` - ç¨‹åºç¼ºé™·**

```erlang
% è§¦å‘ä¸€ä¸ª error
trigger_error() ->
    % éšå¼è§¦å‘
    {ok, _Val} = {error, "oops"}, % badmatch é”™è¯¯
    % æ˜¾å¼è§¦å‘
    erlang:error({my_custom_error, "Something is very wrong"}).

% ä¸æ¨èçš„æ•è·æ–¹å¼ï¼ˆä»…ç”¨äºæ¼”ç¤ºï¼‰
catch_error() ->
    try trigger_error()
    catch
        error:Reason -> {caught_error, Reason}
    end.

% è°ƒç”¨
% catch_error() ä¼šè¿”å› {caught_error, {badmatch, {error, "oops"}}}
```

**2. `throw` - å¯é¢„æœŸçš„éæœ¬åœ°è¿”å›**

æƒ³è±¡ä¸€ä¸‹ï¼Œä½ è¦åœ¨ä¸€ä¸ªæ·±åº¦åµŒå¥—çš„åˆ—è¡¨ä¸­å¯»æ‰¾ä¸€ä¸ªç‰¹å®šçš„å€¼ï¼Œæ‰¾åˆ°åå°±æƒ³ç«‹å³è¿”å›ï¼Œè€Œä¸æ˜¯ç»§ç»­é€’å½’ã€‚

```erlang
-module(search).
-export([find/2]).

find(List, Value) ->
    try
        do_find(List, Value),
        {error, not_found} % å¦‚æœ do_find æ­£å¸¸ç»“æŸï¼ˆæ²¡æŠ›å‡ºï¼‰ï¼Œè¯´æ˜æ²¡æ‰¾åˆ°
    catch
        throw:found -> {ok, Value}
    end.

do_find([Value | _], Value) ->
    throw(found); % æ‰¾åˆ°äº†ï¼Œç«‹å³â€œè·³å‡ºâ€
do_find([H | T], Value) when is_list(H) ->
    do_find(H, Value), % å…ˆåœ¨å­åˆ—è¡¨ä¸­æ‰¾
    do_find(T, Value); % å†åœ¨åˆ—è¡¨å‰©ä½™éƒ¨åˆ†æ‰¾
do_find([_ | T], Value) ->
    do_find(T, Value);
do_find([], _Value) ->
    ok. % ä»€ä¹ˆä¹Ÿä¸åšï¼Œè®©é€’å½’è‡ªç„¶ç»“æŸ
```

**3. `exit` - è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸä¿¡å·**

`exit` ä¿¡å·é€šå¸¸åœ¨å¤šè¿›ç¨‹åœºæ™¯ä¸‹æ‰æœ‰æ„ä¹‰ï¼Œå®ƒä¸ `spawn_link` å’Œ `Supervisor` æ¯æ¯ç›¸å…³ã€‚

```erlang
% è§¦å‘ä¸€ä¸ª exit
main() ->
    % é“¾æ¥ä¸€ä¸ªå­è¿›ç¨‹
    Parent = self(),
    spawn_link(fun() ->
        timer:sleep(500),
        % å­è¿›ç¨‹å‘é€ä¸€ä¸ªé€€å‡ºä¿¡å·
        exit({i_am_done, "finished my job"})
    end),

    % çˆ¶è¿›ç¨‹éœ€è¦"æ•è·"è¿™ä¸ªä¿¡å·ï¼Œå¦åˆ™å®ƒä¹Ÿä¼šè¢«é»˜è®¤è¡Œä¸ºæ€æ­»
    process_flag(trap_exit, true),

    % ç­‰å¾…å¹¶å¤„ç†é€€å‡ºä¿¡å·
    receive
        {'EXIT', FromPid, Reason} ->
            io:format("çˆ¶è¿›ç¨‹æ•è·åˆ°æ¥è‡ª ~p çš„é€€å‡ºä¿¡å·, åŸå› : ~p~n", [FromPid, Reason])
    end.

% è°ƒç”¨ main().
% è¾“å‡ºï¼šçˆ¶è¿›ç¨‹æ•è·åˆ°æ¥è‡ª <0.123.0> çš„é€€å‡ºä¿¡å·, åŸå› : {i_am_done,"finished my job"}
```

#### æ€»ç»“ï¼šJava å¼€å‘è€…å¦‚ä½•é€‚åº”ï¼Ÿ

1.  **å‡½æ•°å¼é”™è¯¯å¤„ç†ä¼˜å…ˆ**ï¼šå¯¹äºå¯é¢„æœŸçš„å¤±è´¥ï¼ˆå¦‚æ–‡ä»¶æœªæ‰¾åˆ°ã€ç½‘ç»œè¶…æ—¶ï¼‰ï¼Œ**ä¸è¦ä½¿ç”¨ `try...catch`**ã€‚è€Œæ˜¯è®©å‡½æ•°è¿”å› `{ok, Value}` æˆ– `{error, Reason}` å…ƒç»„ã€‚è¿™æ˜¯æœ€åœ°é“ã€æœ€å¸¸è§çš„ Erlang é£æ ¼ã€‚
    ```erlang
    % âœ… æ¨èçš„é£æ ¼
    safe_divide(A, B) when B =/= 0 ->
        {ok, A / B};
    safe_divide(_, 0) ->
        {error, division_by_zero}.
    ```
2.  **å°† `try...catch` è§†ä¸ºæœ€åçš„é˜²çº¿**ï¼šä»…åœ¨ä¸ä¸éµå¾ªä¸Šè¿°é£æ ¼çš„æ—§åº“äº¤äº’ï¼Œæˆ–éœ€è¦å¤„ç† `throw`ï¼ˆéæœ¬åœ°è¿”å›ï¼‰æ—¶æ‰ä½¿ç”¨ `try...catch`ã€‚
3.  **æ‹¥æŠ±â€œä»»å…¶å´©æºƒâ€**ï¼šå¿˜è®°åœ¨æ¯ä¸ªå‡½æ•°é‡Œéƒ½å†™ä¸Šé˜²å¾¡æ€§ä»£ç ã€‚æŠŠç²¾åŠ›æ”¾åœ¨è®¾è®¡å¥½ Supervisor æ ‘ä¸Šï¼Œè®©å®ƒæ¥å¤„ç†é‚£äº›ä½ æ²¡é¢„æ–™åˆ°çš„ `error`ï¼Œè¿™æ‰æ˜¯ Erlang ç³»ç»Ÿå¥å£®æ€§çš„æ¥æºã€‚

### 6.2 äºŒè¿›åˆ¶æ“ä½œ

```erlang
% åˆ†å‰²
binary:split(<<"a,b,c">>, <<",">>),        % [<<"a">>, <<"b,c">>]
binary:split(<<"a,b,c">>, <<",">>, [global]), % [<<"a">>, <<"b">>, <<"c">>]

% æ›¿æ¢
binary:replace(<<"hello">>, <<"l">>, <<"L">>, [global]), % <<"heLLo">>

% ç¼–ç 
binary:encode_hex(<<1, 255>>), % <<"01ff">>
binary:decode_hex(<<"01ff">>), % <<1, 255>>
```

### 6.3 åŠ å¯†

```erlang
% å“ˆå¸Œ
crypto:hash(sha256, <<"data">>),  % 32å­—èŠ‚å“ˆå¸Œ
crypto:hash(sha512, <<"data">>),  % 64å­—èŠ‚å“ˆå¸Œ

% HMAC
Key = <<"secret">>,
crypto:mac(hmac, sha256, Key, <<"data">>),

% éšæœºæ•°
crypto:strong_rand_bytes(32).    % å®‰å…¨éšæœºå­—èŠ‚
```

### 6.4 åˆ—è¡¨æ“ä½œ

```erlang
lists:reverse([1,2,3]),        % [3,2,1]
lists:sort([3,1,2]),           % [1,2,3]
lists:member(2, [1,2,3]),      % true
lists:nth(2, [a,b,c]),         % b (1ç´¢å¼•ï¼)

lists:map(fun(X) -> X*2 end, [1,2,3]),    % [2,4,6]
lists:filter(fun(X) -> X>2 end, [1,2,3,4]), % [3,4]
lists:foldl(fun(X,Acc) -> X+Acc end, 0, [1,2,3]), % 6
```

### 6.5 æ˜ å°„æ“ä½œ

```erlang
maps:get(key, Map),                    % å€¼æˆ–å¼‚å¸¸
maps:get(key, Map, Default),           % å€¼æˆ–é»˜è®¤å€¼
maps:put(key, value, Map),             % æ–°æ˜ å°„
maps:update(key, value, Map),          % æ›´æ–°ï¼ˆå¿…é¡»å­˜åœ¨ï¼‰
maps:remove(key, Map),                 % åˆ é™¤

maps:keys(Map), maps:values(Map),      % é”®å€¼åˆ—è¡¨
maps:merge(M1, M2),                    % åˆå¹¶
maps:map(fun(K,V) -> V*2 end, Map).    % å˜æ¢
```

### 6.6 å­—ç¬¦ä¸²æ“ä½œ

```erlang
string:uppercase(<<"hello">>),         % <<"HELLO">>
string:lowercase(<<"HELLO">>),         % <<"hello">>
string:trim(<<" hello ">>),            % <<"hello">>

string:split(<<"a,b,c">>, <<",">>),    % [<<"a">>, <<"b,c">>]
string:find(<<"hello world">>, <<"world">>), % <<"world">>
```

### 6.7 æ–‡ä»¶ I/O

```erlang
% è¯»å–
{ok, Data} = file:read_file("file.txt"),
{ok, Fd} = file:open("file.txt", [read]),
{ok, Line} = file:read_line(Fd),
file:close(Fd),

% å†™å…¥
file:write_file("out.txt", <<"data">>),
{ok, Fd} = file:open("out.txt", [write]),
file:write(Fd, <<"line\n">>),
file:close(Fd),

% ä¿¡æ¯
{ok, Info} = file:read_file_info("file.txt"),
Info#file_info.size,  % æ–‡ä»¶å¤§å°
file:list_dir(".").   % ç›®å½•å†…å®¹
```

### 6.8 æ­£åˆ™è¡¨è¾¾å¼

```erlang
% åŒ¹é…
re:run(<<"abc123">>, "\\d+"),          % {match, ...}
{match, [Match]} = re:run(<<"abc123">>, "\\d+", [{capture, all, binary}]),
Match,  % <<"123">>

% åˆ†å‰²å’Œæ›¿æ¢
re:split(<<"a,b,c">>, ","),            % [<<"a">>, <<"b">>, <<"c">>]
re:replace(<<"hello">>, "l", "L", [global]), % <<"heLLo">>
```

## Day 7: é«˜çº§ç‰¹æ€§ï¼ˆAdvanced Topicsï¼‰

### 7.1 ETS - Erlang å†…å­˜æ•°æ®åº“

```erlang
% åˆ›å»ºè¡¨
Table = ets:new(my_table, [set, public, named_table]),

% æ’å…¥
ets:insert(my_table, {key1, <<"value1">>}),
ets:insert(my_table, [{k1, v1}, {k2, v2}]),

% æŸ¥è¯¢
ets:lookup(my_table, key1),    % [{key1,"value1"}]
ets:member(my_table, key1),    % true

% åˆ é™¤
ets:delete(my_table, key1),
ets:delete(my_table).          % åˆ é™¤è¡¨
```

### 7.2 å®šæ—¶å™¨

```erlang
% å‘é€å»¶è¿Ÿæ¶ˆæ¯
timer:send_after(1000, self(), timeout),

% å®šæœŸæ¶ˆæ¯
{ok, Ref} = timer:send_interval(1000, self(), tick),
timer:cancel(Ref),

% æµ‹é‡æ‰§è¡Œæ—¶é—´
{Time, Result} = timer:tc(fun() -> expensive() end),
Time.  % å¾®ç§’
```

### 7.3 é˜Ÿåˆ—

```erlang
Q0 = queue:new(),
Q1 = queue:in(item1, Q0),
Q2 = queue:in(item2, Q1),
{{value, Item}, Q3} = queue:out(Q2),  % Item=item1

queue:len(Q3),      % 1
queue:is_empty(Q3), % false
queue:to_list(Q3).  % [item2]
```

### 7.4 ç«¯å£ï¼ˆå¤–éƒ¨ç¨‹åºï¼‰

```erlang
% å¯åŠ¨å¤–éƒ¨ç¨‹åº
Port = open_port({spawn, "python script.py"}, [
    binary,
    {packet, 4},
    exit_status
]),

% å‘é€æ•°æ®
Port ! {self(), {command, <<"input">>}},

% æ¥æ”¶è¾“å‡º
receive
    {Port, {data, Output}} ->
        handle_output(Output);
    {Port, {exit_status, Status}} ->
        done
end,

port_close(Port).
```

### 7.5 å¼•ç”¨ (References)

```erlang
% åˆ›å»ºå”¯ä¸€æ ‡è¯†ç¬¦
Ref = make_ref(),

% è¯·æ±‚-å“åº”æ¨¡å¼
request(Pid, Msg) ->
    Ref = make_ref(),
    Pid ! {request, Ref, self(), Msg},
    receive
        {response, Ref, Result} -> {ok, Result}
    after 5000 -> timeout
    end.
```

> **Pro Tip**: `make_ref()` è¿”å›çš„å¼•ç”¨åœ¨æ•´ä¸ª Erlang è¿è¡Œæ—¶ç³»ç»Ÿï¼ˆèŠ‚ç‚¹ï¼‰ä¸­éƒ½æ˜¯å”¯ä¸€çš„ï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨å•ä¸ªè¿›ç¨‹å†…ã€‚è¿™ä½¿å¾—å®ƒéå¸¸é€‚åˆåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ ‡è®°è¯·æ±‚è€Œä¸ç”¨æ‹…å¿ƒå†²çªã€‚

### 7.6 å±æ€§åˆ—è¡¨ (Proplists)

```erlang
% åˆ›å»º
Props = [{name, <<"Alice">>}, {age, 25}],

% è®¿é—®
proplists:get_value(name, Props),      % <<"Alice">>
proplists:get_value(missing, Props, default), % default

% å¸ƒå°”æ ‡å¿—
Props2 = [verbose, {debug, false}],
proplists:get_bool(verbose, Props2).  % true
```

### 7.7 ä½è¿ç®—

```erlang
% ä½è¿ç®—
16#FF band 16#0F,  % AND: 15
16#F0 bor 16#0F,   % OR: 255
16#FF bxor 16#0F,  % XOR: 240
bnot 16#FF,        % NOT

% ç§»ä½
1 bsl 3,   % å·¦ç§»: 8
8 bsr 1,   % å³ç§»: 4

% ä½æ“ä½œ
set_bit(Value, Position) -> Value bor (1 bsl Position).
clear_bit(Value, Position) -> Value band bnot (1 bsl Position).
check_bit(Value, Position) -> (Value band (1 bsl Position)) =/= 0.
```

### 7.8 ç³»ç»Ÿè‡ªçœ

```erlang
% è¿›ç¨‹ä¿¡æ¯
process_info(self()),              % æ‰€æœ‰ä¿¡æ¯
process_info(self(), memory),      % å†…å­˜ä½¿ç”¨
process_info(self(), message_queue_len), % æ¶ˆæ¯é˜Ÿåˆ—é•¿åº¦

% ç³»ç»Ÿä¿¡æ¯
erlang:system_info(process_count), % è¿›ç¨‹æ•°é‡
erlang:system_info(schedulers),    % è°ƒåº¦å™¨æ•°é‡
erlang:memory(),                   % å†…å­˜ç»Ÿè®¡

% è¿›ç¨‹åˆ—è¡¨
erlang:processes(),                % æ‰€æœ‰è¿›ç¨‹
erlang:registered().               % æ³¨å†Œçš„è¿›ç¨‹å

% è¿›ç¨‹å­—å…¸
put(key, value),                   % è®¾ç½®
get(key),                          % è·å–
erase(key).                        % åˆ é™¤

% **âš ï¸ å¼ºçƒˆå»ºè®®ï¼š** é¿å…ä½¿ç”¨è¿›ç¨‹å­—å…¸ã€‚å®ƒç±»ä¼¼äºä¸€ä¸ªè¿›ç¨‹å†…çš„"å…¨å±€å˜é‡"ï¼Œä¼šç ´åå‡½æ•°å¼ç¼–ç¨‹çš„çº¯ç²¹æ€§ï¼Œå¹¶ä½¿ä»£ç éš¾ä»¥ç»´æŠ¤ã€‚çŠ¶æ€åº”å§‹ç»ˆé€šè¿‡å‡½æ•°å‚æ•°æˆ– gen_server çš„å¾ªç¯çŠ¶æ€æ¥æ˜¾å¼ä¼ é€’ã€‚
```

## Day 8: æ¨¡å—ç³»ç»Ÿä¸ NIFs

### 8.1 æ¨¡å—åŸºç¡€

```erlang
% æ¨¡å—å®šä¹‰
-module(my_module).                    % æ–‡ä»¶åå¿…é¡»æ˜¯ my_module.erl
-export([public_func/1]).              % å¯¼å‡ºçš„å‡½æ•°
-import(lists, [map/2, filter/2]).     % å¯¼å…¥å‡½æ•°

% å®å®šä¹‰
-define(TIMEOUT, 5000).
-define(PI, 3.14159).

% è®°å½•å®šä¹‰
-record(user, {id, name, age = 0}).

% å…¬å…±å‡½æ•°
public_func(X) ->
    private_func(X) * 2.

% ç§æœ‰å‡½æ•°
private_func(X) ->
    X + 1.
```

### 8.2 ç¼–è¯‘æŒ‡ä»¤

```erlang
% å¯¼å‡ºæ‰€æœ‰å‡½æ•°ï¼ˆè°ƒè¯•ç”¨ï¼‰
-compile(export_all).

% å†…è”ä¼˜åŒ–
-compile({inline, [fast_func/1]}).

% æ¡ä»¶ç¼–è¯‘
-ifdef(DEBUG).
debug_log(Msg) -> io:format("DEBUG: ~p~n", [Msg]).
-else.
debug_log(_) -> ok.
-endif.
```

### 8.3 ç±»å‹è§„èŒƒ

```erlang
% å‡½æ•°ç±»å‹è§„èŒƒ
-spec add(integer(), integer()) -> integer().
add(A, B) ->
    A + B.

% è‡ªå®šä¹‰ç±»å‹
-type user_id() :: pos_integer().
-type user() :: #{id => user_id(), name => binary()}.

-spec find_user(user_id()) -> {ok, user()} | {error, not_found}.
```

### 8.4 NIF åŸºç¡€

```erlang
% Erlang æ¨¡å—
-module(my_nif).
-export([sha256/1]).
-on_load(init/0).

init() ->
    SoName = filename:join(code:priv_dir(my_app), "my_nif"),
    ok = erlang:load_nif(SoName, 0).

sha256(_Data) ->
    erlang:nif_error({not_loaded, ?MODULE}).

%% ä½¿ç”¨
Hash = my_nif:sha256(<<"hello">>).
```

```c
// C NIF å®ç°
#include "erl_nif.h"

static ERL_NIF_TERM sha256_nif(ErlNifEnv* env, int argc,
                                const ERL_NIF_TERM argv[]) {
    ErlNifBinary input;
    if (!enif_inspect_binary(env, argv[0], &input)) {
        return enif_make_badarg(env);
    }

    unsigned char output[32];
    sha256(input.data, input.size, output);

    ERL_NIF_TERM result;
    unsigned char* result_data = enif_make_new_binary(env, 32, &result);
    memcpy(result_data, output, 32);

    return result;
}

static ErlNifFunc nif_funcs[] = {
    {"sha256", 1, sha256_nif}
};

ERL_NIF_INIT(my_nif, nif_funcs, NULL, NULL, NULL, NULL)
```

**é‡è¦æç¤º**ï¼šNIFs æä¾›äº†åœ¨ Erlang ä¸­æ‰§è¡Œé«˜æ€§èƒ½åŸç”Ÿä»£ç çš„èƒ½åŠ›ã€‚ç„¶è€Œï¼ŒNIF ä¸­çš„ä»»ä½•å´©æºƒéƒ½å¯èƒ½å¯¼è‡´æ•´ä¸ª Erlang è™šæ‹Ÿæœºï¼ˆBEAM VMï¼‰å´©æºƒï¼Œè¿™ä¸ Erlang è¿›ç¨‹çš„"let it crash"å“²å­¦å½¢æˆå¯¹æ¯”ã€‚å› æ­¤ï¼ŒNIFs çš„å¼€å‘éœ€è¦æ ¼å¤–å°å¿ƒã€‚

### 8.6 NIF è„è°ƒåº¦å™¨ (Dirty Schedulers)

**é—®é¢˜**ï¼šNIF å‡½æ•°å¿…é¡»å¿«é€Ÿå®Œæˆï¼ˆ< 1msï¼‰ï¼Œå¦åˆ™ä¼šé˜»å¡æ•´ä¸ª Erlang è°ƒåº¦å™¨ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨è„è°ƒåº¦å™¨å¤„ç†é•¿æ—¶é—´è¿è¡Œçš„æ“ä½œã€‚

```erlang
% Erlang æ¨¡å—å£°æ˜è„ NIF
-on_load(init/0).

long_operation(_Data) ->
    erlang:nif_error({not_loaded, ?MODULE}).

init() ->
    SoName = filename:join(code:priv_dir(my_app), "my_nif"),
    ok = erlang:load_nif(SoName, 0).
```

```c
// C NIF å®ç°ä½¿ç”¨è„è°ƒåº¦å™¨
static ERL_NIF_TERM long_operation_nif(ErlNifEnv* env, int argc,
                                       const ERL_NIF_TERM argv[]) {
    // è¿™ä¸ªå‡½æ•°ä¼šåœ¨è„è°ƒåº¦å™¨ä¸Šè¿è¡Œ
    // ä¸ä¼šé˜»å¡ Erlang çš„ä¸»è°ƒåº¦å™¨
    heavy_computation();
    return enif_make_atom(env, "ok");
}

static ErlNifFunc nif_funcs[] = {
    // ç¬¬å››ä¸ªå‚æ•°æŒ‡å®šè°ƒåº¦å™¨ç±»å‹
    {"long_operation", 0, long_operation_nif, ERL_NIF_DIRTY_JOB_CPU_BOUND}
};
```

**è„è°ƒåº¦å™¨ç±»å‹**ï¼š
- `ERL_NIF_DIRTY_JOB_CPU_BOUND`: CPU å¯†é›†å‹æ“ä½œ
- `ERL_NIF_DIRTY_JOB_IO_BOUND`: I/O å¯†é›†å‹æ“ä½œ

**ä½•æ—¶ä½¿ç”¨**ï¼š
- âœ… CPU å¯†é›†è®¡ç®—ï¼ˆåŠ å¯†ã€å‹ç¼©ï¼‰
- âœ… I/O æ“ä½œï¼ˆæ–‡ä»¶ã€ç½‘ç»œï¼‰
- âœ… ä»»ä½•å¯èƒ½ > 1ms çš„æ“ä½œ

**ä½•æ—¶ä¸ç”¨**ï¼š
- âŒ å¿«é€Ÿæ“ä½œï¼ˆ< 1msï¼‰
- âŒ ç®€å•çš„æ•°æ®è½¬æ¢

### 8.5 Rustler NIFs

```rust
use rustler::{Binary, Encoder, Env, NifResult, Term};

#[rustler::nif]
fn sha256<'a>(env: Env<'a>, data: Binary) -> NifResult<Term<'a>> {
    let hash = compute_sha256(data.as_slice());
    Ok(hash.encode(env))
}

rustler::init!("my_nif");
```

---

## ğŸ‰ ç°åœ¨ä½ å¯ä»¥å®Œå…¨çœ‹æ‡‚ HyperBEAM æ•™ç¨‹äº†ï¼

è¿™ä¸ªæ•™ç¨‹æ¶µç›–äº† https://hbdocs.vercel.app/hyperbeam/erlang ä¸­çš„**æ‰€æœ‰åŸºç¡€çŸ¥è¯†**ï¼š

### âœ… å®Œå…¨è¦†ç›–çš„æ¦‚å¿µï¼š

**åŸºç¡€æ•°æ®ç±»å‹ï¼š**
- Numbers, atoms, binaries, strings
- Variables & pattern matching

**æ•°æ®ç»“æ„ï¼š**
- Lists, tuples, maps, records

**å‡½æ•°ç³»ç»Ÿï¼š**
- Functions, guards, pattern matching in functions

**æ§åˆ¶æµï¼š**
- case/if expressions, recursion, higher-order functions

**å¹¶å‘ç¼–ç¨‹ï¼š**
- Processes & message passing
- Process links & monitors
- gen_server, supervisor, application

**æ ‡å‡†åº“ï¼š**
- try/catch/after (error handling)
- Binary, crypto, lists, maps, string modules
- File I/O, regular expressions

**é«˜çº§ç‰¹æ€§ï¼š**
- ETS (in-memory database)
- Timer functions, queues, ports
- References, proplists, bitwise operations
- System introspection

**æ¨¡å—ç³»ç»Ÿï¼š**
- Module basics, compile directives, type specifications

**NIFsï¼š**
- C NIFs basics, working with binaries
- Rustler NIFs, best practices

### ğŸš€ ä½ ç°åœ¨å…·å¤‡äº†ç†è§£ HyperBEAM æºä»£ç çš„å®Œæ•´åŸºç¡€çŸ¥è¯†ï¼

---

## ğŸ“š è¿›é˜¶å­¦ä¹ èµ„æº

- [Erlang å®˜æ–¹æ–‡æ¡£](https://www.erlang.org/docs)
- [HyperBEAM Erlang æ•™ç¨‹](https://hbdocs.vercel.app/hyperbeam/erlang)
- [Programming Erlang](https://pragprog.com/titles/jaerlang2/programming-erlang-2nd-edition/)
- [Erlang in Anger](https://www.erlang-in-anger.com/) - ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ

---

## ğŸ¯ Java å¼€å‘è€…å­¦ä¹  Erlang çš„å…³é”®æ€ç»´è½¬å˜

### æ ¸å¿ƒæ¦‚å¿µå¯¹æ¯”

| Java æ€ç»´ | Erlang æ€ç»´ | ä¸ºä»€ä¹ˆ Erlang æ›´å¥½ |
|-----------|-------------|-------------------|
| **é¢å‘å¯¹è±¡**<br>`class User {}` | **å‡½æ•°å¼**<br>`-module(user).` | æ›´ç®€å•ï¼Œæ•°æ®ä¸è¡Œä¸ºåˆ†ç¦» |
| **å¯å˜çŠ¶æ€**<br>`x = 10; x = 20;` | **ä¸å¯å˜æ•°æ®**<br>`X = 10, Y = X + 10.` | çº¿ç¨‹å®‰å…¨ï¼Œæ— å‰¯ä½œç”¨ |
| **å¼‚å¸¸æŠ›å‡º**<br>`throw new Exception()` | **è¿”å›å€¼æ¨¡å¼**<br>`{error, reason}` | æ˜ç¡®é”™è¯¯å¤„ç†ï¼Œå‡½æ•°å¼å‹å¥½ |
| **çº¿ç¨‹åŒæ­¥**<br>`synchronized(obj)` | **æ¶ˆæ¯ä¼ é€’**<br>`Pid ! message` | é¿å…äº†å…±äº«å†…å­˜å¯¼è‡´çš„æ­»é”å’Œç«äº‰æ¡ä»¶ |
| **ç»§æ‰¿**<br>`extends Parent` | **è¡Œä¸º(Behaviour)**<br>`-behaviour(gen_server).` | ç»„åˆä¼˜äºç»§æ‰¿ï¼Œæ›´çµæ´» |
| **åƒåœ¾å›æ”¶**<br>è‡ªåŠ¨ | **åƒåœ¾å›æ”¶**<br>å“åº”æ€§æä½³ | æ— ã€æš‚åœä¸–ç•Œã€çš„åƒåœ¾å›æ”¶ï¼Œå“åº”æ€§æä½³ |

### å­¦ä¹ æ›²çº¿ä¸å»ºè®®

#### ğŸ“ˆ **å­¦ä¹ é˜¶æ®µ**
1. **Day 1-2**: è¯­æ³•åŸºç¡€ - åƒå­¦ä¹ æ–°è¯­è¨€è¯­æ³•
2. **Day 3-4**: å‡½æ•°å¼æ€ç»´ - æœ€éš¾çš„æ€ç»´è½¬å˜
3. **Day 5-6**: å¹¶å‘ç¼–ç¨‹ - Erlang çš„æ ¸å¿ƒä¼˜åŠ¿
4. **Day 7-8**: å®è·µåº”ç”¨ - èä¼šè´¯é€š

#### ğŸ’¡ **å­¦ä¹ æŠ€å·§**
- **å¤šå†™é€’å½’**ï¼šå¿˜è®°å¾ªç¯ï¼Œç”¨é€’å½’æ€è€ƒ
- **ä½¿ç”¨æ¨¡å¼åŒ¹é…**ï¼šå‚æ•°è§£æ„æ˜¯å¸¸æ€
- **å‡½æ•°å¼é”™è¯¯å¤„ç†**ï¼šè¿”å›å€¼è€Œéå¼‚å¸¸
- **æ¶ˆæ¯ä¼ é€’**ï¼šè¿›ç¨‹é—´é€šä¿¡è€Œéå…±äº«çŠ¶æ€

#### âš ï¸ **å¸¸è§é™·é˜±**
- å¿˜è®°å˜é‡ä¸å¯å˜ï¼Œè¯•å›¾é‡æ–°èµ‹å€¼
- ç”¨ Java å¼‚å¸¸å¤„ç†æ–¹å¼å†™ Erlang ä»£ç 
- è¯•å›¾ç”¨çº¿ç¨‹æ€ç»´ç†è§£ Erlang è¿›ç¨‹
- å¿˜è®°åŸå­ï¼ˆatomï¼‰å¸¸ç”¨äºçŠ¶æ€å’Œæ ‡ç­¾
- åœ¨éœ€è¦é«˜æ€§èƒ½å¤„ç†çš„åœ°æ–¹è¯¯ç”¨å­—ç¬¦ä¸²ï¼ˆå­—ç¬¦åˆ—è¡¨ï¼‰ï¼Œè€Œä¸æ˜¯é«˜æ•ˆçš„äºŒè¿›åˆ¶

### Erlang å¼€å‘æœ€ä½³å®è·µ

#### ğŸ—ï¸ **ä»£ç ç»„ç»‡**
- ä¸€ä¸ªæ¨¡å—ä¸€ä¸ªèŒè´£
- å¯¼å‡ºæœ€å°åŒ–æ¥å£
- ä½¿ç”¨è®°å½•å®šä¹‰æ•°æ®ç»“æ„
- æ·»åŠ ç±»å‹è§„èŒƒ

#### ğŸ”§ **é”™è¯¯å¤„ç†**
- è®©è¿›ç¨‹å´©æºƒï¼ˆ"Let it crash"ï¼‰
- ä½¿ç”¨ supervisor é‡å¯å¤±è´¥è¿›ç¨‹
- å‡½æ•°å¼é”™è¯¯å¤„ç†ï¼ˆè¿”å›å€¼ï¼‰
- æ—¥å¿—è®°å½•é‡è¦é”™è¯¯

#### ğŸš€ **æ€§èƒ½ä¼˜åŒ–**
- ä½¿ç”¨å°¾é€’å½’
- åˆ©ç”¨äºŒè¿›åˆ¶ï¼ˆbinariesï¼‰å¤„ç†å¤§æ•°æ®
- ETS å­˜å‚¨é¢‘ç¹è®¿é—®æ•°æ®
- NIF å¤„ç†æ€§èƒ½å…³é”®ä»£ç 

### ä¸‹ä¸€æ­¥å­¦ä¹ è·¯å¾„

1. **æ·±å…¥ OTP**ï¼šsupervisor æ ‘ã€åº”ç”¨ç”Ÿå‘½å‘¨æœŸ
2. **åˆ†å¸ƒå¼ Erlang**ï¼šèŠ‚ç‚¹é€šä¿¡ã€é›†ç¾¤ç®¡ç†
3. **å®é™…é¡¹ç›®**ï¼šæ„å»ºèŠå¤©æœåŠ¡å™¨ã€ç¼“å­˜ç³»ç»Ÿ
4. **æ€§èƒ½è°ƒä¼˜**ï¼šVM å‚æ•°ã€ä»£ç ä¼˜åŒ–
5. **ç”Ÿäº§éƒ¨ç½²**ï¼šå‘å¸ƒã€ç›‘æ§ã€ç»´æŠ¤

**è®°ä½ï¼šErlang ä¸æ˜¯ Java çš„æ›¿ä»£å“ï¼Œè€Œæ˜¯å¹¶å‘ç¼–ç¨‹ã€åˆ†å¸ƒå¼ç³»ç»Ÿçš„é¦–é€‰ï¼** ğŸš€

---

## ğŸ“š å®Œæ•´å­¦ä¹ èµ„æº

### å®˜æ–¹èµ„æº
- [Erlang å®˜æ–¹æ–‡æ¡£](https://www.erlang.org/docs) - æœ€æƒå¨çš„å‚è€ƒ
- [HyperBEAM Erlang æ•™ç¨‹](https://hbdocs.vercel.app/hyperbeam/erlang) - ç°åœ¨ä½ å¯ä»¥å®Œå…¨çœ‹æ‡‚äº†ï¼

### ä¹¦ç±æ¨è
- [Programming Erlang](https://pragprog.com/titles/jaerlang2/programming-erlang-2nd-edition/) - å…¥é—¨ç»å…¸
- [Erlang in Anger](https://www.erlang-in-anger.com/) - ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ
- [Learn You Some Erlang](https://learnyousomeerlang.com/) - å…è´¹åœ¨çº¿æ•™ç¨‹

### é¡¹ç›®å®è·µ
- [HyperBEAM é¡¹ç›®](https://github.com/weavedb/hyperbeam) - å­¦ä¹ çœŸå®é¡¹ç›®
- [RabbitMQ](https://github.com/rabbitmq/rabbitmq-server) - Erlang æ˜æ˜Ÿé¡¹ç›®
- [ejabberd](https://github.com/processone/ejabberd) - XMPP æœåŠ¡å™¨

### ç¤¾åŒºèµ„æº
- [Erlang Forums](https://erlangforums.com/) - å®˜æ–¹è®ºå›
- [Reddit r/erlang](https://reddit.com/r/erlang) - ç¤¾åŒºè®¨è®º
- [Erlang Slack](https://erlang-slack.herokuapp.com/) - å®æ—¶äº¤æµ

**ç¥ä½ åœ¨ Erlang çš„å¹¶å‘ä¸–ç•Œä¸­ç¼–ç¨‹æ„‰å¿«ï¼** ğŸ‰
